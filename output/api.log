2026-02-11 09:25:38,896 - __main__ - INFO - [lifespan:326] ============================================================
2026-02-11 09:25:38,897 - __main__ - INFO - [lifespan:327] CustomOCR Pipeline API v2.2.0 starting...
2026-02-11 09:25:38,897 - __main__ - INFO - [lifespan:328] ============================================================
2026-02-11 09:25:38,897 - __main__ - INFO - [lifespan:331] Output Directory  : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output
2026-02-11 09:25:38,897 - __main__ - INFO - [lifespan:332] Completed Dir     : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output/completed
2026-02-11 09:25:38,897 - __main__ - INFO - [lifespan:333] Max Upload Size   : 500 MB
2026-02-11 09:25:38,897 - __main__ - INFO - [lifespan:334] Max Workers       : 2
2026-02-11 09:25:38,897 - __main__ - INFO - [lifespan:335] Job Retention     : 24 hours
2026-02-11 09:25:38,897 - __main__ - INFO - [lifespan:336] Allowed Extensions: 23 types
2026-02-11 09:25:38,897 - __main__ - INFO - [lifespan:343] Output directory: Writable âœ“
2026-02-11 09:25:38,897 - __main__ - INFO - [lifespan:350] Thread pool initialized with 2 workers
2026-02-11 09:25:38,897 - __main__ - INFO - [lifespan:358] ============================================================
2026-02-11 09:25:38,897 - __main__ - INFO - [lifespan:359] API Ready. Accepting requests.
2026-02-11 09:25:38,897 - __main__ - INFO - [lifespan:360] ============================================================
2026-02-11 09:33:45,199 - __main__ - INFO - [lifespan:365] CustomOCR Pipeline API shutting down...
2026-02-11 09:33:45,199 - __main__ - INFO - [periodic_job_cleanup:900] Periodic cleanup task cancelled
2026-02-11 09:33:45,199 - __main__ - INFO - [lifespan:378] Thread pool shut down
2026-02-11 09:33:45,199 - __main__ - INFO - [lifespan:380] Shutdown complete.
2026-02-11 09:41:33,964 - __main__ - INFO - [lifespan:326] ============================================================
2026-02-11 09:41:33,964 - __main__ - INFO - [lifespan:327] CustomOCR Pipeline API v2.2.0 starting...
2026-02-11 09:41:33,965 - __main__ - INFO - [lifespan:328] ============================================================
2026-02-11 09:41:33,965 - __main__ - INFO - [lifespan:331] Output Directory  : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output
2026-02-11 09:41:33,965 - __main__ - INFO - [lifespan:332] Completed Dir     : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output/completed
2026-02-11 09:41:33,965 - __main__ - INFO - [lifespan:333] Max Upload Size   : 500 MB
2026-02-11 09:41:33,965 - __main__ - INFO - [lifespan:334] Max Workers       : 2
2026-02-11 09:41:33,965 - __main__ - INFO - [lifespan:335] Job Retention     : 24 hours
2026-02-11 09:41:33,965 - __main__ - INFO - [lifespan:336] Allowed Extensions: 23 types
2026-02-11 09:41:33,965 - __main__ - INFO - [lifespan:343] Output directory: Writable âœ“
2026-02-11 09:41:33,965 - __main__ - INFO - [lifespan:350] Thread pool initialized with 2 workers
2026-02-11 09:41:33,965 - __main__ - INFO - [lifespan:358] ============================================================
2026-02-11 09:41:33,965 - __main__ - INFO - [lifespan:359] API Ready. Accepting requests.
2026-02-11 09:41:33,965 - __main__ - INFO - [lifespan:360] ============================================================
2026-02-11 09:44:16,510 - __main__ - INFO - [lifespan:365] CustomOCR Pipeline API shutting down...
2026-02-11 09:44:16,510 - __main__ - INFO - [periodic_job_cleanup:900] Periodic cleanup task cancelled
2026-02-11 09:44:16,510 - __main__ - INFO - [lifespan:378] Thread pool shut down
2026-02-11 09:44:16,510 - __main__ - INFO - [lifespan:380] Shutdown complete.
2026-02-11 09:51:48,927 - __main__ - INFO - [lifespan:326] ============================================================
2026-02-11 09:51:48,927 - __main__ - INFO - [lifespan:327] CustomOCR Pipeline API v2.2.0 starting...
2026-02-11 09:51:48,927 - __main__ - INFO - [lifespan:328] ============================================================
2026-02-11 09:51:48,927 - __main__ - INFO - [lifespan:331] Output Directory  : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output
2026-02-11 09:51:48,927 - __main__ - INFO - [lifespan:332] Completed Dir     : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output/completed
2026-02-11 09:51:48,927 - __main__ - INFO - [lifespan:333] Max Upload Size   : 500 MB
2026-02-11 09:51:48,927 - __main__ - INFO - [lifespan:334] Max Workers       : 2
2026-02-11 09:51:48,927 - __main__ - INFO - [lifespan:335] Job Retention     : 24 hours
2026-02-11 09:51:48,927 - __main__ - INFO - [lifespan:336] Allowed Extensions: 23 types
2026-02-11 09:51:48,927 - __main__ - INFO - [lifespan:343] Output directory: Writable âœ“
2026-02-11 09:51:48,927 - __main__ - INFO - [lifespan:350] Thread pool initialized with 2 workers
2026-02-11 09:51:48,928 - __main__ - INFO - [lifespan:358] ============================================================
2026-02-11 09:51:48,928 - __main__ - INFO - [lifespan:359] API Ready. Accepting requests.
2026-02-11 09:51:48,928 - __main__ - INFO - [lifespan:360] ============================================================
2026-02-11 09:55:28,381 - __main__ - INFO - [lifespan:365] CustomOCR Pipeline API shutting down...
2026-02-11 09:55:28,381 - __main__ - INFO - [periodic_job_cleanup:900] Periodic cleanup task cancelled
2026-02-11 09:55:28,381 - __main__ - INFO - [lifespan:378] Thread pool shut down
2026-02-11 09:55:28,381 - __main__ - INFO - [lifespan:380] Shutdown complete.
2026-02-11 10:06:38,883 - __main__ - INFO - [lifespan:326] ============================================================
2026-02-11 10:06:38,883 - __main__ - INFO - [lifespan:327] CustomOCR Pipeline API v2.2.0 starting...
2026-02-11 10:06:38,883 - __main__ - INFO - [lifespan:328] ============================================================
2026-02-11 10:06:38,883 - __main__ - INFO - [lifespan:331] Output Directory  : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output
2026-02-11 10:06:38,883 - __main__ - INFO - [lifespan:332] Completed Dir     : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output/completed
2026-02-11 10:06:38,883 - __main__ - INFO - [lifespan:333] Max Upload Size   : 500 MB
2026-02-11 10:06:38,883 - __main__ - INFO - [lifespan:334] Max Workers       : 2
2026-02-11 10:06:38,883 - __main__ - INFO - [lifespan:335] Job Retention     : 24 hours
2026-02-11 10:06:38,883 - __main__ - INFO - [lifespan:336] Allowed Extensions: 23 types
2026-02-11 10:06:38,884 - __main__ - INFO - [lifespan:343] Output directory: Writable âœ“
2026-02-11 10:06:38,884 - __main__ - INFO - [lifespan:350] Thread pool initialized with 2 workers
2026-02-11 10:06:38,884 - __main__ - INFO - [lifespan:358] ============================================================
2026-02-11 10:06:38,884 - __main__ - INFO - [lifespan:359] API Ready. Accepting requests.
2026-02-11 10:06:38,884 - __main__ - INFO - [lifespan:360] ============================================================
2026-02-11 10:07:49,861 - __main__ - INFO - [lifespan:365] CustomOCR Pipeline API shutting down...
2026-02-11 10:07:49,861 - __main__ - INFO - [periodic_job_cleanup:900] Periodic cleanup task cancelled
2026-02-11 10:07:49,861 - __main__ - INFO - [lifespan:378] Thread pool shut down
2026-02-11 10:07:49,861 - __main__ - INFO - [lifespan:380] Shutdown complete.
2026-02-11 10:23:23,380 - __main__ - INFO - [lifespan:326] ============================================================
2026-02-11 10:23:23,380 - __main__ - INFO - [lifespan:327] CustomOCR Pipeline API v2.2.0 starting...
2026-02-11 10:23:23,380 - __main__ - INFO - [lifespan:328] ============================================================
2026-02-11 10:23:23,380 - __main__ - INFO - [lifespan:331] Output Directory  : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output
2026-02-11 10:23:23,380 - __main__ - INFO - [lifespan:332] Completed Dir     : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output/completed
2026-02-11 10:23:23,380 - __main__ - INFO - [lifespan:333] Max Upload Size   : 500 MB
2026-02-11 10:23:23,380 - __main__ - INFO - [lifespan:334] Max Workers       : 2
2026-02-11 10:23:23,380 - __main__ - INFO - [lifespan:335] Job Retention     : 24 hours
2026-02-11 10:23:23,380 - __main__ - INFO - [lifespan:336] Allowed Extensions: 23 types
2026-02-11 10:23:23,380 - __main__ - INFO - [lifespan:343] Output directory: Writable âœ“
2026-02-11 10:23:23,381 - __main__ - INFO - [lifespan:350] Thread pool initialized with 2 workers
2026-02-11 10:23:23,381 - __main__ - INFO - [lifespan:358] ============================================================
2026-02-11 10:23:23,381 - __main__ - INFO - [lifespan:359] API Ready. Accepting requests.
2026-02-11 10:23:23,381 - __main__ - INFO - [lifespan:360] ============================================================
2026-02-11 10:31:14,683 - __main__ - INFO - [periodic_job_cleanup:900] Periodic cleanup task cancelled
2026-02-11 10:31:17,743 - __main__ - INFO - [lifespan:326] ============================================================
2026-02-11 10:31:17,743 - __main__ - INFO - [lifespan:327] CustomOCR Pipeline API v2.2.0 starting...
2026-02-11 10:31:17,743 - __main__ - INFO - [lifespan:328] ============================================================
2026-02-11 10:31:17,743 - __main__ - INFO - [lifespan:331] Output Directory  : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output
2026-02-11 10:31:17,743 - __main__ - INFO - [lifespan:332] Completed Dir     : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output/completed
2026-02-11 10:31:17,743 - __main__ - INFO - [lifespan:333] Max Upload Size   : 500 MB
2026-02-11 10:31:17,743 - __main__ - INFO - [lifespan:334] Max Workers       : 2
2026-02-11 10:31:17,743 - __main__ - INFO - [lifespan:335] Job Retention     : 24 hours
2026-02-11 10:31:17,743 - __main__ - INFO - [lifespan:336] Allowed Extensions: 23 types
2026-02-11 10:31:17,743 - __main__ - INFO - [lifespan:343] Output directory: Writable âœ“
2026-02-11 10:31:17,743 - __main__ - INFO - [lifespan:350] Thread pool initialized with 2 workers
2026-02-11 10:31:17,743 - __main__ - INFO - [lifespan:358] ============================================================
2026-02-11 10:31:17,743 - __main__ - INFO - [lifespan:359] API Ready. Accepting requests.
2026-02-11 10:31:17,743 - __main__ - INFO - [lifespan:360] ============================================================
2026-02-11 10:31:28,365 - __main__ - INFO - [lifespan:365] CustomOCR Pipeline API shutting down...
2026-02-11 10:31:28,366 - __main__ - INFO - [periodic_job_cleanup:900] Periodic cleanup task cancelled
2026-02-11 10:31:28,366 - __main__ - INFO - [lifespan:378] Thread pool shut down
2026-02-11 10:31:28,366 - __main__ - INFO - [lifespan:380] Shutdown complete.
2026-02-11 10:32:15,495 - __main__ - INFO - [lifespan:326] ============================================================
2026-02-11 10:32:15,495 - __main__ - INFO - [lifespan:327] CustomOCR Pipeline API v2.2.0 starting...
2026-02-11 10:32:15,495 - __main__ - INFO - [lifespan:328] ============================================================
2026-02-11 10:32:15,495 - __main__ - INFO - [lifespan:331] Output Directory  : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output
2026-02-11 10:32:15,495 - __main__ - INFO - [lifespan:332] Completed Dir     : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output/completed
2026-02-11 10:32:15,495 - __main__ - INFO - [lifespan:333] Max Upload Size   : 500 MB
2026-02-11 10:32:15,495 - __main__ - INFO - [lifespan:334] Max Workers       : 2
2026-02-11 10:32:15,495 - __main__ - INFO - [lifespan:335] Job Retention     : 24 hours
2026-02-11 10:32:15,495 - __main__ - INFO - [lifespan:336] Allowed Extensions: 23 types
2026-02-11 10:32:15,495 - __main__ - INFO - [lifespan:343] Output directory: Writable âœ“
2026-02-11 10:32:15,495 - __main__ - INFO - [lifespan:350] Thread pool initialized with 2 workers
2026-02-11 10:32:15,495 - __main__ - INFO - [lifespan:358] ============================================================
2026-02-11 10:32:15,495 - __main__ - INFO - [lifespan:359] API Ready. Accepting requests.
2026-02-11 10:32:15,495 - __main__ - INFO - [lifespan:360] ============================================================
2026-02-11 10:33:17,016 - __main__ - INFO - [lifespan:365] CustomOCR Pipeline API shutting down...
2026-02-11 10:33:17,017 - __main__ - INFO - [periodic_job_cleanup:900] Periodic cleanup task cancelled
2026-02-11 10:33:17,017 - __main__ - INFO - [lifespan:378] Thread pool shut down
2026-02-11 10:33:17,017 - __main__ - INFO - [lifespan:380] Shutdown complete.
2026-02-11 10:40:39,505 - __main__ - INFO - [lifespan:326] ============================================================
2026-02-11 10:40:39,505 - __main__ - INFO - [lifespan:327] CustomOCR Pipeline API v2.2.0 starting...
2026-02-11 10:40:39,505 - __main__ - INFO - [lifespan:328] ============================================================
2026-02-11 10:40:39,505 - __main__ - INFO - [lifespan:331] Output Directory  : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output
2026-02-11 10:40:39,505 - __main__ - INFO - [lifespan:332] Completed Dir     : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output/completed
2026-02-11 10:40:39,505 - __main__ - INFO - [lifespan:333] Max Upload Size   : 500 MB
2026-02-11 10:40:39,505 - __main__ - INFO - [lifespan:334] Max Workers       : 2
2026-02-11 10:40:39,505 - __main__ - INFO - [lifespan:335] Job Retention     : 24 hours
2026-02-11 10:40:39,505 - __main__ - INFO - [lifespan:336] Allowed Extensions: 23 types
2026-02-11 10:40:39,505 - __main__ - INFO - [lifespan:343] Output directory: Writable âœ“
2026-02-11 10:40:39,505 - __main__ - INFO - [lifespan:350] Thread pool initialized with 2 workers
2026-02-11 10:40:39,505 - __main__ - INFO - [lifespan:358] ============================================================
2026-02-11 10:40:39,505 - __main__ - INFO - [lifespan:359] API Ready. Accepting requests.
2026-02-11 10:40:39,505 - __main__ - INFO - [lifespan:360] ============================================================
2026-02-11 10:58:01,129 - __main__ - INFO - [periodic_job_cleanup:900] Periodic cleanup task cancelled
2026-02-11 10:58:08,945 - __main__ - INFO - [lifespan:326] ============================================================
2026-02-11 10:58:08,945 - __main__ - INFO - [lifespan:327] CustomOCR Pipeline API v2.2.0 starting...
2026-02-11 10:58:08,945 - __main__ - INFO - [lifespan:328] ============================================================
2026-02-11 10:58:08,945 - __main__ - INFO - [lifespan:331] Output Directory  : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output
2026-02-11 10:58:08,945 - __main__ - INFO - [lifespan:332] Completed Dir     : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output/completed
2026-02-11 10:58:08,945 - __main__ - INFO - [lifespan:333] Max Upload Size   : 500 MB
2026-02-11 10:58:08,945 - __main__ - INFO - [lifespan:334] Max Workers       : 2
2026-02-11 10:58:08,945 - __main__ - INFO - [lifespan:335] Job Retention     : 24 hours
2026-02-11 10:58:08,945 - __main__ - INFO - [lifespan:336] Allowed Extensions: 23 types
2026-02-11 10:58:08,945 - __main__ - INFO - [lifespan:343] Output directory: Writable âœ“
2026-02-11 10:58:08,945 - __main__ - INFO - [lifespan:350] Thread pool initialized with 2 workers
2026-02-11 10:58:08,945 - __main__ - INFO - [lifespan:358] ============================================================
2026-02-11 10:58:08,945 - __main__ - INFO - [lifespan:359] API Ready. Accepting requests.
2026-02-11 10:58:08,945 - __main__ - INFO - [lifespan:360] ============================================================
2026-02-11 10:58:19,366 - __main__ - INFO - [lifespan:365] CustomOCR Pipeline API shutting down...
2026-02-11 10:58:19,366 - __main__ - INFO - [periodic_job_cleanup:900] Periodic cleanup task cancelled
2026-02-11 10:58:19,366 - __main__ - INFO - [lifespan:378] Thread pool shut down
2026-02-11 10:58:19,366 - __main__ - INFO - [lifespan:380] Shutdown complete.
2026-02-11 10:58:59,655 - __main__ - INFO - [lifespan:326] ============================================================
2026-02-11 10:58:59,655 - __main__ - INFO - [lifespan:327] CustomOCR Pipeline API v2.2.0 starting...
2026-02-11 10:58:59,655 - __main__ - INFO - [lifespan:328] ============================================================
2026-02-11 10:58:59,655 - __main__ - INFO - [lifespan:331] Output Directory  : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output
2026-02-11 10:58:59,655 - __main__ - INFO - [lifespan:332] Completed Dir     : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output/completed
2026-02-11 10:58:59,655 - __main__ - INFO - [lifespan:333] Max Upload Size   : 500 MB
2026-02-11 10:58:59,655 - __main__ - INFO - [lifespan:334] Max Workers       : 2
2026-02-11 10:58:59,655 - __main__ - INFO - [lifespan:335] Job Retention     : 24 hours
2026-02-11 10:58:59,655 - __main__ - INFO - [lifespan:336] Allowed Extensions: 23 types
2026-02-11 10:58:59,655 - __main__ - INFO - [lifespan:343] Output directory: Writable âœ“
2026-02-11 10:58:59,655 - __main__ - INFO - [lifespan:350] Thread pool initialized with 2 workers
2026-02-11 10:58:59,655 - __main__ - INFO - [lifespan:358] ============================================================
2026-02-11 10:58:59,655 - __main__ - INFO - [lifespan:359] API Ready. Accepting requests.
2026-02-11 10:58:59,655 - __main__ - INFO - [lifespan:360] ============================================================
2026-02-11 11:00:04,177 - __main__ - INFO - [process_document:672] [Job 61d8a23d9a125d06] Received: Reasons to use Nextcloud.pdf (0.93 MB)
2026-02-11 11:00:11,439 - __main__ - ERROR - [process_ocr_pipeline:549] [Job 61d8a23d9a125d06] Failed at step 'initialization': module 'pyarrow' has no attribute '__version__'
Traceback (most recent call last):
  File "/home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/app.py", line 471, in process_ocr_pipeline
    _load_pipeline_modules()
  File "/home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/app.py", line 188, in _load_pipeline_modules
    from DLA import DLA
  File "/home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/DLA.py", line 12, in <module>
    from paddleocr import LayoutDetection
  File "/opt/conda/lib/python3.12/site-packages/paddleocr/__init__.py", line 15, in <module>
    from paddlex.inference.utils.benchmark import benchmark
  File "/opt/conda/lib/python3.12/site-packages/paddlex/__init__.py", line 49, in <module>
    from .inference import create_pipeline, create_predictor
  File "/opt/conda/lib/python3.12/site-packages/paddlex/inference/__init__.py", line 16, in <module>
    from .models import create_predictor
  File "/opt/conda/lib/python3.12/site-packages/paddlex/inference/models/__init__.py", line 26, in <module>
    from .anomaly_detection import UadPredictor
  File "/opt/conda/lib/python3.12/site-packages/paddlex/inference/models/anomaly_detection/__init__.py", line 15, in <module>
    from .predictor import UadPredictor
  File "/opt/conda/lib/python3.12/site-packages/paddlex/inference/models/anomaly_detection/predictor.py", line 19, in <module>
    from ....modules.anomaly_detection.model_list import MODELS
  File "/opt/conda/lib/python3.12/site-packages/paddlex/modules/__init__.py", line 91, in <module>
    from .ts_anomaly_detection import (
  File "/opt/conda/lib/python3.12/site-packages/paddlex/modules/ts_anomaly_detection/__init__.py", line 16, in <module>
    from .dataset_checker import TSADDatasetChecker
  File "/opt/conda/lib/python3.12/site-packages/paddlex/modules/ts_anomaly_detection/dataset_checker/__init__.py", line 26, in <module>
    from .dataset_src import check, convert, deep_analyse, split_dataset
  File "/opt/conda/lib/python3.12/site-packages/paddlex/modules/ts_anomaly_detection/dataset_checker/dataset_src/__init__.py", line 17, in <module>
    from .check_dataset import check
  File "/opt/conda/lib/python3.12/site-packages/paddlex/modules/ts_anomaly_detection/dataset_checker/dataset_src/check_dataset.py", line 20, in <module>
    import pandas as pd
  File "/opt/conda/lib/python3.12/site-packages/pandas/__init__.py", line 26, in <module>
    from pandas.compat import (
  File "/opt/conda/lib/python3.12/site-packages/pandas/compat/__init__.py", line 29, in <module>
    from pandas.compat.pyarrow import (
  File "/opt/conda/lib/python3.12/site-packages/pandas/compat/pyarrow.py", line 10, in <module>
    _palv = Version(Version(pa.__version__).base_version)
                            ^^^^^^^^^^^^^^
AttributeError: module 'pyarrow' has no attribute '__version__'

2026-02-11 11:00:11,439 - __main__ - INFO - [cleanup_job_directory:570] Cleaned up: 61d8a23d9a125d06
2026-02-11 11:05:59,382 - __main__ - INFO - [lifespan:365] CustomOCR Pipeline API shutting down...
2026-02-11 11:05:59,382 - __main__ - INFO - [periodic_job_cleanup:900] Periodic cleanup task cancelled
2026-02-11 11:05:59,383 - __main__ - INFO - [lifespan:378] Thread pool shut down
2026-02-11 11:05:59,383 - __main__ - INFO - [lifespan:380] Shutdown complete.
2026-02-11 11:12:24,025 - __main__ - INFO - [lifespan:326] ============================================================
2026-02-11 11:12:24,025 - __main__ - INFO - [lifespan:327] CustomOCR Pipeline API v2.2.0 starting...
2026-02-11 11:12:24,025 - __main__ - INFO - [lifespan:328] ============================================================
2026-02-11 11:12:24,025 - __main__ - INFO - [lifespan:331] Output Directory  : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output
2026-02-11 11:12:24,025 - __main__ - INFO - [lifespan:332] Completed Dir     : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output/completed
2026-02-11 11:12:24,025 - __main__ - INFO - [lifespan:333] Max Upload Size   : 500 MB
2026-02-11 11:12:24,025 - __main__ - INFO - [lifespan:334] Max Workers       : 2
2026-02-11 11:12:24,025 - __main__ - INFO - [lifespan:335] Job Retention     : 24 hours
2026-02-11 11:12:24,025 - __main__ - INFO - [lifespan:336] Allowed Extensions: 23 types
2026-02-11 11:12:24,025 - __main__ - INFO - [lifespan:343] Output directory: Writable âœ“
2026-02-11 11:12:24,025 - __main__ - INFO - [lifespan:350] Thread pool initialized with 2 workers
2026-02-11 11:12:24,025 - __main__ - INFO - [lifespan:358] ============================================================
2026-02-11 11:12:24,025 - __main__ - INFO - [lifespan:359] API Ready. Accepting requests.
2026-02-11 11:12:24,025 - __main__ - INFO - [lifespan:360] ============================================================
2026-02-11 11:13:10,762 - __main__ - INFO - [process_document:672] [Job ef39e207e6ad5f4c] Received: saudi_2030.pdf (0.06 MB)
2026-02-11 11:13:18,800 - pikepdf._core - INFO - [<module>:13] pikepdf C++ to Python logger bridge initialized
2026-02-11 11:13:18,813 - __main__ - INFO - [_load_pipeline_modules:201] All pipeline modules loaded successfully
2026-02-11 11:13:18,814 - __main__ - INFO - [process_ocr_pipeline:479] [Job ef39e207e6ad5f4c] Starting pipeline with 38 workers
2026-02-11 11:13:18,814 - __main__ - INFO - [process_ocr_pipeline:483] [Job ef39e207e6ad5f4c] Step 1/3 - Ingesting file...
2026-02-11 11:13:18,814 - root - INFO - [_load_config:91] âœ… Loaded config from /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/resources/dla.vars.json
2026-02-11 11:13:18,823 - root - INFO - [_register_fonts:111] âœ… Loaded font for Arabic support: /usr/share/fonts/truetype/dejavu/DejaVuSans.ttf
2026-02-11 11:13:18,823 - root - INFO - [process_input:139] ðŸ“„ Processing PDF: saudi_2030.pdf
2026-02-11 11:13:18,824 - root - INFO - [_pdf_to_images_fitz:253]    -> Extracting 3 pages...
2026-02-11 11:13:19,207 - __main__ - INFO - [process_ocr_pipeline:496] [Job ef39e207e6ad5f4c] Step 2/3 - Analyzing document layout (3 pages)...
2026-02-11 11:13:19,765 - __main__ - ERROR - [process_ocr_pipeline:549] [Job ef39e207e6ad5f4c] Failed at step 'layout_analysis': A dependency error occurred during predictor creation. Please refer to the installation documentation to ensure all required dependencies are installed.
Traceback (most recent call last):
  File "/opt/conda/lib/python3.12/site-packages/paddleocr/_models/base.py", line 76, in _create_paddlex_predictor
    return create_predictor(
           ^^^^^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/paddlex/inference/models/__init__.py", line 84, in create_predictor
    return BasePredictor.get(model_name)(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/paddlex/inference/models/object_detection/predictor.py", line 70, in __init__
    super().__init__(*args, **kwargs)
  File "/opt/conda/lib/python3.12/site-packages/paddlex/inference/models/base/predictor/base_predictor.py", line 150, in __init__
    self.batch_sampler = self._build_batch_sampler()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/paddlex/inference/models/object_detection/predictor.py", line 115, in _build_batch_sampler
    return ImageBatchSampler()
           ^^^^^^^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/paddlex/inference/common/batch_sampler/image_batch_sampler.py", line 51, in __init__
    self.pdf_reader = PDFReader()
                      ^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/paddlex/inference/utils/io/readers.py", line 102, in __init__
    super().__init__(backend, **bk_args)
  File "/opt/conda/lib/python3.12/site-packages/paddlex/inference/utils/io/readers.py", line 68, in __init__
    self._backend = self.get_backend()
                    ^^^^^^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/paddlex/inference/utils/io/readers.py", line 78, in get_backend
    return self._init_backend(self.bk_type, bk_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/paddlex/inference/utils/io/readers.py", line 111, in _init_backend
    return PDFReaderBackend(**bk_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/paddlex/utils/deps.py", line 155, in _wrapper
    require_deps(*cls._deps_, obj_name=cls.__name__)
  File "/opt/conda/lib/python3.12/site-packages/paddlex/utils/deps.py", line 135, in require_deps
    raise DependencyError(msg)
paddlex.utils.deps.DependencyError: `PDFReaderBackend` is not ready for use, because the following dependencies are not available:
opencv-contrib-python

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/app.py", line 500, in process_ocr_pipeline
    dla = _dla_cls()
          ^^^^^^^^^^
  File "/home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/DLA.py", line 28, in __init__
    self._init_paddle_model()
  File "/home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/DLA.py", line 56, in _init_paddle_model
    self.psession = LayoutDetection(model_name=model_name)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/paddleocr/_models/_object_detection.py", line 44, in __init__
    super().__init__(**kwargs)
  File "/opt/conda/lib/python3.12/site-packages/paddleocr/_models/base.py", line 46, in __init__
    self.paddlex_predictor = self._create_paddlex_predictor()
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/paddleocr/_models/base.py", line 80, in _create_paddlex_predictor
    raise RuntimeError(
RuntimeError: A dependency error occurred during predictor creation. Please refer to the installation documentation to ensure all required dependencies are installed.

2026-02-11 11:16:10,070 - __main__ - INFO - [lifespan:326] ============================================================
2026-02-11 11:16:10,070 - __main__ - INFO - [lifespan:327] CustomOCR Pipeline API v2.2.0 starting...
2026-02-11 11:16:10,070 - __main__ - INFO - [lifespan:328] ============================================================
2026-02-11 11:16:10,070 - __main__ - INFO - [lifespan:331] Output Directory  : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output
2026-02-11 11:16:10,070 - __main__ - INFO - [lifespan:332] Completed Dir     : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output/completed
2026-02-11 11:16:10,070 - __main__ - INFO - [lifespan:333] Max Upload Size   : 500 MB
2026-02-11 11:16:10,070 - __main__ - INFO - [lifespan:334] Max Workers       : 2
2026-02-11 11:16:10,070 - __main__ - INFO - [lifespan:335] Job Retention     : 24 hours
2026-02-11 11:16:10,070 - __main__ - INFO - [lifespan:336] Allowed Extensions: 23 types
2026-02-11 11:16:10,070 - __main__ - INFO - [lifespan:343] Output directory: Writable âœ“
2026-02-11 11:16:10,070 - __main__ - INFO - [lifespan:350] Thread pool initialized with 2 workers
2026-02-11 11:16:10,070 - __main__ - INFO - [lifespan:358] ============================================================
2026-02-11 11:16:10,070 - __main__ - INFO - [lifespan:359] API Ready. Accepting requests.
2026-02-11 11:16:10,070 - __main__ - INFO - [lifespan:360] ============================================================
2026-02-11 11:16:45,704 - __main__ - INFO - [process_document:672] [Job 30adf8d573b351a8] Received: saudi_2030.pdf (0.06 MB)
2026-02-11 11:16:53,463 - pikepdf._core - INFO - [<module>:13] pikepdf C++ to Python logger bridge initialized
2026-02-11 11:16:53,476 - __main__ - INFO - [_load_pipeline_modules:201] All pipeline modules loaded successfully
2026-02-11 11:16:53,477 - __main__ - INFO - [process_ocr_pipeline:479] [Job 30adf8d573b351a8] Starting pipeline with 38 workers
2026-02-11 11:16:53,477 - __main__ - INFO - [process_ocr_pipeline:483] [Job 30adf8d573b351a8] Step 1/3 - Ingesting file...
2026-02-11 11:16:53,477 - root - INFO - [_load_config:91] âœ… Loaded config from /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/resources/dla.vars.json
2026-02-11 11:16:53,486 - root - INFO - [_register_fonts:111] âœ… Loaded font for Arabic support: /usr/share/fonts/truetype/dejavu/DejaVuSans.ttf
2026-02-11 11:16:53,486 - root - INFO - [process_input:139] ðŸ“„ Processing PDF: saudi_2030.pdf
2026-02-11 11:16:53,487 - root - INFO - [_pdf_to_images_fitz:253]    -> Extracting 3 pages...
2026-02-11 11:16:53,870 - __main__ - INFO - [process_ocr_pipeline:496] [Job 30adf8d573b351a8] Step 2/3 - Analyzing document layout (3 pages)...
2026-02-11 11:16:54,421 - __main__ - ERROR - [process_ocr_pipeline:549] [Job 30adf8d573b351a8] Failed at step 'layout_analysis': A dependency error occurred during predictor creation. Please refer to the installation documentation to ensure all required dependencies are installed.
Traceback (most recent call last):
  File "/opt/conda/lib/python3.12/site-packages/paddleocr/_models/base.py", line 76, in _create_paddlex_predictor
    return create_predictor(
           ^^^^^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/paddlex/inference/models/__init__.py", line 84, in create_predictor
    return BasePredictor.get(model_name)(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/paddlex/inference/models/object_detection/predictor.py", line 70, in __init__
    super().__init__(*args, **kwargs)
  File "/opt/conda/lib/python3.12/site-packages/paddlex/inference/models/base/predictor/base_predictor.py", line 150, in __init__
    self.batch_sampler = self._build_batch_sampler()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/paddlex/inference/models/object_detection/predictor.py", line 115, in _build_batch_sampler
    return ImageBatchSampler()
           ^^^^^^^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/paddlex/inference/common/batch_sampler/image_batch_sampler.py", line 51, in __init__
    self.pdf_reader = PDFReader()
                      ^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/paddlex/inference/utils/io/readers.py", line 102, in __init__
    super().__init__(backend, **bk_args)
  File "/opt/conda/lib/python3.12/site-packages/paddlex/inference/utils/io/readers.py", line 68, in __init__
    self._backend = self.get_backend()
                    ^^^^^^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/paddlex/inference/utils/io/readers.py", line 78, in get_backend
    return self._init_backend(self.bk_type, bk_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/paddlex/inference/utils/io/readers.py", line 111, in _init_backend
    return PDFReaderBackend(**bk_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/paddlex/utils/deps.py", line 155, in _wrapper
    require_deps(*cls._deps_, obj_name=cls.__name__)
  File "/opt/conda/lib/python3.12/site-packages/paddlex/utils/deps.py", line 135, in require_deps
    raise DependencyError(msg)
paddlex.utils.deps.DependencyError: `PDFReaderBackend` is not ready for use, because the following dependencies are not available:
opencv-contrib-python

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/app.py", line 500, in process_ocr_pipeline
    dla = _dla_cls()
          ^^^^^^^^^^
  File "/home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/DLA.py", line 28, in __init__
    self._init_paddle_model()
  File "/home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/DLA.py", line 56, in _init_paddle_model
    self.psession = LayoutDetection(model_name=model_name)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/paddleocr/_models/_object_detection.py", line 44, in __init__
    super().__init__(**kwargs)
  File "/opt/conda/lib/python3.12/site-packages/paddleocr/_models/base.py", line 46, in __init__
    self.paddlex_predictor = self._create_paddlex_predictor()
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/paddleocr/_models/base.py", line 80, in _create_paddlex_predictor
    raise RuntimeError(
RuntimeError: A dependency error occurred during predictor creation. Please refer to the installation documentation to ensure all required dependencies are installed.

2026-02-11 11:20:35,805 - __main__ - INFO - [lifespan:326] ============================================================
2026-02-11 11:20:35,805 - __main__ - INFO - [lifespan:327] CustomOCR Pipeline API v2.2.0 starting...
2026-02-11 11:20:35,805 - __main__ - INFO - [lifespan:328] ============================================================
2026-02-11 11:20:35,806 - __main__ - INFO - [lifespan:331] Output Directory  : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output
2026-02-11 11:20:35,806 - __main__ - INFO - [lifespan:332] Completed Dir     : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output/completed
2026-02-11 11:20:35,806 - __main__ - INFO - [lifespan:333] Max Upload Size   : 500 MB
2026-02-11 11:20:35,806 - __main__ - INFO - [lifespan:334] Max Workers       : 2
2026-02-11 11:20:35,806 - __main__ - INFO - [lifespan:335] Job Retention     : 24 hours
2026-02-11 11:20:35,806 - __main__ - INFO - [lifespan:336] Allowed Extensions: 23 types
2026-02-11 11:20:35,806 - __main__ - INFO - [lifespan:343] Output directory: Writable âœ“
2026-02-11 11:20:35,806 - __main__ - INFO - [lifespan:350] Thread pool initialized with 2 workers
2026-02-11 11:20:35,806 - __main__ - INFO - [lifespan:358] ============================================================
2026-02-11 11:20:35,806 - __main__ - INFO - [lifespan:359] API Ready. Accepting requests.
2026-02-11 11:20:35,806 - __main__ - INFO - [lifespan:360] ============================================================
2026-02-11 11:21:06,963 - __main__ - INFO - [process_document:672] [Job 4e593873c38bb43b] Received: saudi_2030.pdf (0.06 MB)
2026-02-11 11:21:12,643 - pikepdf._core - INFO - [<module>:13] pikepdf C++ to Python logger bridge initialized
2026-02-11 11:21:12,656 - __main__ - INFO - [_load_pipeline_modules:201] All pipeline modules loaded successfully
2026-02-11 11:21:12,656 - __main__ - INFO - [process_ocr_pipeline:479] [Job 4e593873c38bb43b] Starting pipeline with 38 workers
2026-02-11 11:21:12,656 - __main__ - INFO - [process_ocr_pipeline:483] [Job 4e593873c38bb43b] Step 1/3 - Ingesting file...
2026-02-11 11:21:12,657 - root - INFO - [_load_config:91] âœ… Loaded config from /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/resources/dla.vars.json
2026-02-11 11:21:12,666 - root - INFO - [_register_fonts:111] âœ… Loaded font for Arabic support: /usr/share/fonts/truetype/dejavu/DejaVuSans.ttf
2026-02-11 11:21:12,666 - root - INFO - [process_input:139] ðŸ“„ Processing PDF: saudi_2030.pdf
2026-02-11 11:21:12,667 - root - INFO - [_pdf_to_images_fitz:253]    -> Extracting 3 pages...
2026-02-11 11:21:13,049 - __main__ - INFO - [process_ocr_pipeline:496] [Job 4e593873c38bb43b] Step 2/3 - Analyzing document layout (3 pages)...
2026-02-11 11:21:13,594 - __main__ - ERROR - [process_ocr_pipeline:549] [Job 4e593873c38bb43b] Failed at step 'layout_analysis': A dependency error occurred during predictor creation. Please refer to the installation documentation to ensure all required dependencies are installed.
Traceback (most recent call last):
  File "/opt/conda/lib/python3.12/site-packages/paddleocr/_models/base.py", line 76, in _create_paddlex_predictor
    return create_predictor(
           ^^^^^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/paddlex/inference/models/__init__.py", line 84, in create_predictor
    return BasePredictor.get(model_name)(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/paddlex/inference/models/object_detection/predictor.py", line 70, in __init__
    super().__init__(*args, **kwargs)
  File "/opt/conda/lib/python3.12/site-packages/paddlex/inference/models/base/predictor/base_predictor.py", line 150, in __init__
    self.batch_sampler = self._build_batch_sampler()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/paddlex/inference/models/object_detection/predictor.py", line 115, in _build_batch_sampler
    return ImageBatchSampler()
           ^^^^^^^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/paddlex/inference/common/batch_sampler/image_batch_sampler.py", line 51, in __init__
    self.pdf_reader = PDFReader()
                      ^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/paddlex/inference/utils/io/readers.py", line 102, in __init__
    super().__init__(backend, **bk_args)
  File "/opt/conda/lib/python3.12/site-packages/paddlex/inference/utils/io/readers.py", line 68, in __init__
    self._backend = self.get_backend()
                    ^^^^^^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/paddlex/inference/utils/io/readers.py", line 78, in get_backend
    return self._init_backend(self.bk_type, bk_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/paddlex/inference/utils/io/readers.py", line 111, in _init_backend
    return PDFReaderBackend(**bk_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/paddlex/utils/deps.py", line 155, in _wrapper
    require_deps(*cls._deps_, obj_name=cls.__name__)
  File "/opt/conda/lib/python3.12/site-packages/paddlex/utils/deps.py", line 135, in require_deps
    raise DependencyError(msg)
paddlex.utils.deps.DependencyError: `PDFReaderBackend` is not ready for use, because the following dependencies are not available:
opencv-contrib-python

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/app.py", line 500, in process_ocr_pipeline
    dla = _dla_cls()
          ^^^^^^^^^^
  File "/home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/DLA.py", line 28, in __init__
    self._init_paddle_model()
  File "/home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/DLA.py", line 56, in _init_paddle_model
    self.psession = LayoutDetection(model_name=model_name)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/paddleocr/_models/_object_detection.py", line 44, in __init__
    super().__init__(**kwargs)
  File "/opt/conda/lib/python3.12/site-packages/paddleocr/_models/base.py", line 46, in __init__
    self.paddlex_predictor = self._create_paddlex_predictor()
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/paddleocr/_models/base.py", line 80, in _create_paddlex_predictor
    raise RuntimeError(
RuntimeError: A dependency error occurred during predictor creation. Please refer to the installation documentation to ensure all required dependencies are installed.

2026-02-11 11:31:40,782 - __main__ - INFO - [lifespan:326] ============================================================
2026-02-11 11:31:40,782 - __main__ - INFO - [lifespan:327] CustomOCR Pipeline API v2.2.0 starting...
2026-02-11 11:31:40,782 - __main__ - INFO - [lifespan:328] ============================================================
2026-02-11 11:31:40,782 - __main__ - INFO - [lifespan:331] Output Directory  : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output
2026-02-11 11:31:40,782 - __main__ - INFO - [lifespan:332] Completed Dir     : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output/completed
2026-02-11 11:31:40,782 - __main__ - INFO - [lifespan:333] Max Upload Size   : 500 MB
2026-02-11 11:31:40,782 - __main__ - INFO - [lifespan:334] Max Workers       : 2
2026-02-11 11:31:40,782 - __main__ - INFO - [lifespan:335] Job Retention     : 24 hours
2026-02-11 11:31:40,782 - __main__ - INFO - [lifespan:336] Allowed Extensions: 23 types
2026-02-11 11:31:40,782 - __main__ - INFO - [lifespan:343] Output directory: Writable âœ“
2026-02-11 11:31:40,782 - __main__ - INFO - [lifespan:350] Thread pool initialized with 2 workers
2026-02-11 11:31:40,782 - __main__ - INFO - [lifespan:358] ============================================================
2026-02-11 11:31:40,782 - __main__ - INFO - [lifespan:359] API Ready. Accepting requests.
2026-02-11 11:31:40,782 - __main__ - INFO - [lifespan:360] ============================================================
2026-02-11 11:32:10,330 - __main__ - INFO - [process_document:672] [Job 2a8b5e54dfe819b1] Received: Reasons to use Nextcloud.pdf (0.93 MB)
2026-02-11 11:32:19,612 - pikepdf._core - INFO - [<module>:13] pikepdf C++ to Python logger bridge initialized
2026-02-11 11:32:19,625 - __main__ - INFO - [_load_pipeline_modules:201] All pipeline modules loaded successfully
2026-02-11 11:32:19,625 - __main__ - INFO - [process_ocr_pipeline:479] [Job 2a8b5e54dfe819b1] Starting pipeline with 38 workers
2026-02-11 11:32:19,625 - __main__ - INFO - [process_ocr_pipeline:483] [Job 2a8b5e54dfe819b1] Step 1/3 - Ingesting file...
2026-02-11 11:32:19,626 - root - INFO - [_load_config:91] âœ… Loaded config from /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/resources/dla.vars.json
2026-02-11 11:32:19,634 - root - INFO - [_register_fonts:111] âœ… Loaded font for Arabic support: /usr/share/fonts/truetype/dejavu/DejaVuSans.ttf
2026-02-11 11:32:19,635 - root - INFO - [process_input:139] ðŸ“„ Processing PDF: Reasons to use Nextcloud.pdf
2026-02-11 11:32:19,637 - root - INFO - [_pdf_to_images_fitz:253]    -> Extracting 8 pages...
2026-02-11 11:32:22,163 - __main__ - INFO - [process_ocr_pipeline:496] [Job 2a8b5e54dfe819b1] Step 2/3 - Analyzing document layout (8 pages)...
2026-02-11 11:37:23,200 - __main__ - INFO - [lifespan:326] ============================================================
2026-02-11 11:37:23,200 - __main__ - INFO - [lifespan:327] CustomOCR Pipeline API v2.2.0 starting...
2026-02-11 11:37:23,200 - __main__ - INFO - [lifespan:328] ============================================================
2026-02-11 11:37:23,200 - __main__ - INFO - [lifespan:331] Output Directory  : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output
2026-02-11 11:37:23,200 - __main__ - INFO - [lifespan:332] Completed Dir     : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output/completed
2026-02-11 11:37:23,200 - __main__ - INFO - [lifespan:333] Max Upload Size   : 500 MB
2026-02-11 11:37:23,200 - __main__ - INFO - [lifespan:334] Max Workers       : 2
2026-02-11 11:37:23,200 - __main__ - INFO - [lifespan:335] Job Retention     : 24 hours
2026-02-11 11:37:23,200 - __main__ - INFO - [lifespan:336] Allowed Extensions: 23 types
2026-02-11 11:37:23,201 - __main__ - INFO - [lifespan:343] Output directory: Writable âœ“
2026-02-11 11:37:23,201 - __main__ - INFO - [lifespan:350] Thread pool initialized with 2 workers
2026-02-11 11:37:23,201 - __main__ - INFO - [lifespan:358] ============================================================
2026-02-11 11:37:23,201 - __main__ - INFO - [lifespan:359] API Ready. Accepting requests.
2026-02-11 11:37:23,201 - __main__ - INFO - [lifespan:360] ============================================================
2026-02-11 11:37:59,770 - __main__ - INFO - [lifespan:365] CustomOCR Pipeline API shutting down...
2026-02-11 11:37:59,770 - __main__ - INFO - [periodic_job_cleanup:900] Periodic cleanup task cancelled
2026-02-11 11:37:59,770 - __main__ - INFO - [lifespan:378] Thread pool shut down
2026-02-11 11:37:59,770 - __main__ - INFO - [lifespan:380] Shutdown complete.
2026-02-11 11:38:02,312 - __main__ - INFO - [lifespan:326] ============================================================
2026-02-11 11:38:02,312 - __main__ - INFO - [lifespan:327] CustomOCR Pipeline API v2.2.0 starting...
2026-02-11 11:38:02,312 - __main__ - INFO - [lifespan:328] ============================================================
2026-02-11 11:38:02,312 - __main__ - INFO - [lifespan:331] Output Directory  : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output
2026-02-11 11:38:02,312 - __main__ - INFO - [lifespan:332] Completed Dir     : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output/completed
2026-02-11 11:38:02,312 - __main__ - INFO - [lifespan:333] Max Upload Size   : 500 MB
2026-02-11 11:38:02,312 - __main__ - INFO - [lifespan:334] Max Workers       : 2
2026-02-11 11:38:02,312 - __main__ - INFO - [lifespan:335] Job Retention     : 24 hours
2026-02-11 11:38:02,313 - __main__ - INFO - [lifespan:336] Allowed Extensions: 23 types
2026-02-11 11:38:02,313 - __main__ - INFO - [lifespan:343] Output directory: Writable âœ“
2026-02-11 11:38:02,313 - __main__ - INFO - [lifespan:350] Thread pool initialized with 2 workers
2026-02-11 11:38:02,313 - __main__ - INFO - [lifespan:358] ============================================================
2026-02-11 11:38:02,313 - __main__ - INFO - [lifespan:359] API Ready. Accepting requests.
2026-02-11 11:38:02,313 - __main__ - INFO - [lifespan:360] ============================================================
2026-02-11 11:45:52,997 - __main__ - INFO - [lifespan:365] CustomOCR Pipeline API shutting down...
2026-02-11 11:45:52,997 - __main__ - INFO - [periodic_job_cleanup:900] Periodic cleanup task cancelled
2026-02-11 11:45:52,997 - __main__ - INFO - [lifespan:378] Thread pool shut down
2026-02-11 11:45:52,997 - __main__ - INFO - [lifespan:380] Shutdown complete.
2026-02-11 11:45:58,628 - __main__ - INFO - [lifespan:326] ============================================================
2026-02-11 11:45:58,628 - __main__ - INFO - [lifespan:327] CustomOCR Pipeline API v2.2.0 starting...
2026-02-11 11:45:58,628 - __main__ - INFO - [lifespan:328] ============================================================
2026-02-11 11:45:58,628 - __main__ - INFO - [lifespan:331] Output Directory  : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output
2026-02-11 11:45:58,628 - __main__ - INFO - [lifespan:332] Completed Dir     : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output/completed
2026-02-11 11:45:58,628 - __main__ - INFO - [lifespan:333] Max Upload Size   : 500 MB
2026-02-11 11:45:58,628 - __main__ - INFO - [lifespan:334] Max Workers       : 2
2026-02-11 11:45:58,628 - __main__ - INFO - [lifespan:335] Job Retention     : 24 hours
2026-02-11 11:45:58,628 - __main__ - INFO - [lifespan:336] Allowed Extensions: 23 types
2026-02-11 11:45:58,628 - __main__ - INFO - [lifespan:343] Output directory: Writable âœ“
2026-02-11 11:45:58,628 - __main__ - INFO - [lifespan:350] Thread pool initialized with 2 workers
2026-02-11 11:45:58,628 - __main__ - INFO - [lifespan:358] ============================================================
2026-02-11 11:45:58,628 - __main__ - INFO - [lifespan:359] API Ready. Accepting requests.
2026-02-11 11:45:58,628 - __main__ - INFO - [lifespan:360] ============================================================
2026-02-11 11:46:31,068 - __main__ - INFO - [process_document:672] [Job 7a76a30845240f49] Received: saudi_2030.pdf (0.06 MB)
2026-02-11 11:46:38,726 - pikepdf._core - INFO - [<module>:13] pikepdf C++ to Python logger bridge initialized
2026-02-11 11:46:38,739 - __main__ - INFO - [_load_pipeline_modules:201] All pipeline modules loaded successfully
2026-02-11 11:46:38,739 - __main__ - INFO - [process_ocr_pipeline:479] [Job 7a76a30845240f49] Starting pipeline with 38 workers
2026-02-11 11:46:38,739 - __main__ - INFO - [process_ocr_pipeline:483] [Job 7a76a30845240f49] Step 1/3 - Ingesting file...
2026-02-11 11:46:38,739 - root - INFO - [_load_config:91] âœ… Loaded config from /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/resources/dla.vars.json
2026-02-11 11:46:38,748 - root - INFO - [_register_fonts:111] âœ… Loaded font for Arabic support: /usr/share/fonts/truetype/dejavu/DejaVuSans.ttf
2026-02-11 11:46:38,748 - root - INFO - [process_input:139] ðŸ“„ Processing PDF: saudi_2030.pdf
2026-02-11 11:46:38,749 - root - INFO - [_pdf_to_images_fitz:253]    -> Extracting 3 pages...
2026-02-11 11:46:39,131 - __main__ - INFO - [process_ocr_pipeline:496] [Job 7a76a30845240f49] Step 2/3 - Analyzing document layout (3 pages)...
2026-02-16 16:23:23,548 - __main__ - INFO - [lifespan:326] ============================================================
2026-02-16 16:23:23,548 - __main__ - INFO - [lifespan:327] CustomOCR Pipeline API v2.2.0 starting...
2026-02-16 16:23:23,548 - __main__ - INFO - [lifespan:328] ============================================================
2026-02-16 16:23:23,548 - __main__ - INFO - [lifespan:331] Output Directory  : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output
2026-02-16 16:23:23,548 - __main__ - INFO - [lifespan:332] Completed Dir     : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output/completed
2026-02-16 16:23:23,548 - __main__ - INFO - [lifespan:333] Max Upload Size   : 500 MB
2026-02-16 16:23:23,548 - __main__ - INFO - [lifespan:334] Max Workers       : 2
2026-02-16 16:23:23,548 - __main__ - INFO - [lifespan:335] Job Retention     : 24 hours
2026-02-16 16:23:23,548 - __main__ - INFO - [lifespan:336] Allowed Extensions: 23 types
2026-02-16 16:23:23,548 - __main__ - INFO - [lifespan:343] Output directory: Writable âœ“
2026-02-16 16:23:23,549 - __main__ - INFO - [lifespan:350] Thread pool initialized with 2 workers
2026-02-16 16:23:23,549 - __main__ - INFO - [lifespan:358] ============================================================
2026-02-16 16:23:23,549 - __main__ - INFO - [lifespan:359] API Ready. Accepting requests.
2026-02-16 16:23:23,549 - __main__ - INFO - [lifespan:360] ============================================================
2026-02-16 16:47:42,508 - __main__ - INFO - [lifespan:365] CustomOCR Pipeline API shutting down...
2026-02-16 16:47:42,508 - __main__ - INFO - [periodic_job_cleanup:900] Periodic cleanup task cancelled
2026-02-16 16:47:42,508 - __main__ - INFO - [lifespan:378] Thread pool shut down
2026-02-16 16:47:42,509 - __main__ - INFO - [lifespan:380] Shutdown complete.
2026-02-16 16:47:54,207 - __main__ - INFO - [lifespan:364] ============================================================
2026-02-16 16:47:54,208 - __main__ - INFO - [lifespan:365] CustomOCR Pipeline API v2.3.0 starting...
2026-02-16 16:47:54,208 - __main__ - INFO - [lifespan:366] ============================================================
2026-02-16 16:47:54,208 - __main__ - INFO - [lifespan:367] Output Directory  : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output
2026-02-16 16:47:54,208 - __main__ - INFO - [lifespan:368] Max Upload Size   : 500 MB
2026-02-16 16:47:54,208 - __main__ - INFO - [lifespan:369] Max Workers       : 2
2026-02-16 16:47:54,208 - __main__ - INFO - [lifespan:370] Job Retention     : 24 hours
2026-02-16 16:47:54,208 - __main__ - WARNING - [lifespan:376] Authentication    : DISABLED â€” Set API_AUTH_TOKEN or API_AUTH_TOKENS to enable
2026-02-16 16:47:54,208 - __main__ - INFO - [lifespan:390] ============================================================
2026-02-16 16:47:54,208 - __main__ - INFO - [lifespan:391] API Ready. Accepting requests.
2026-02-16 16:47:54,208 - __main__ - INFO - [lifespan:392] ============================================================
2026-02-16 17:04:46,103 - __main__ - INFO - [lifespan:464] ============================================================
2026-02-16 17:04:46,103 - __main__ - INFO - [lifespan:465] CustomOCR Pipeline API v2.4.0 starting...
2026-02-16 17:04:46,103 - __main__ - INFO - [lifespan:466] ============================================================
2026-02-16 17:04:46,103 - __main__ - INFO - [lifespan:467] Output Directory  : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output
2026-02-16 17:04:46,103 - __main__ - INFO - [lifespan:468] Max Upload Size   : 500 MB
2026-02-16 17:04:46,103 - __main__ - INFO - [lifespan:469] Max Workers       : 2
2026-02-16 17:04:46,103 - __main__ - INFO - [lifespan:470] Job Retention     : 24 hours
2026-02-16 17:04:46,104 - __main__ - INFO - [lifespan:471] Auth Mode         : both
2026-02-16 17:04:46,104 - __main__ - INFO - [lifespan:478] Env Tokens        : None (tokens will be validated via gateway or at runtime)
2026-02-16 17:04:46,104 - __main__ - INFO - [lifespan:480] Authentication    : DYNAMIC â€” Katonic platform tokens accepted via gateway
2026-02-16 17:04:46,104 - __main__ - INFO - [lifespan:481]                     Create tokens at: AI Studio â†’ Global Settings â†’ API Management
2026-02-16 17:04:46,104 - __main__ - INFO - [lifespan:495] ============================================================
2026-02-16 17:04:46,104 - __main__ - INFO - [lifespan:496] API Ready. Accepting requests.
2026-02-16 17:04:46,104 - __main__ - INFO - [lifespan:497] ============================================================
2026-02-16 17:08:31,536 - __main__ - INFO - [verify_token:241] Bearer token accepted (no env tokens configured, gateway header absent). Token hint: ...HCyI
2026-02-16 17:08:31,538 - __main__ - INFO - [process_document:785] [Job 052a1e5ddcbeecd7] Received: saudi_2030.pdf (0.06 MB) [auth: token, user: bearer-authenticated]
2026-02-16 17:08:38,841 - pikepdf._core - INFO - [<module>:13] pikepdf C++ to Python logger bridge initialized
2026-02-16 17:08:38,943 - __main__ - INFO - [_load_pipeline_modules:376] All pipeline modules loaded successfully
2026-02-16 17:08:38,943 - __main__ - INFO - [process_ocr_pipeline:597] [Job 052a1e5ddcbeecd7] Starting with 38 workers
2026-02-16 17:08:38,943 - __main__ - INFO - [process_ocr_pipeline:601] [Job 052a1e5ddcbeecd7] Step 1/3 - Ingesting file...
2026-02-16 17:08:38,943 - root - INFO - [_load_config:91] âœ… Loaded config from /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/resources/dla.vars.json
2026-02-16 17:08:38,952 - root - INFO - [_register_fonts:111] âœ… Loaded font for Arabic support: /usr/share/fonts/truetype/dejavu/DejaVuSans.ttf
2026-02-16 17:08:38,952 - root - INFO - [process_input:139] ðŸ“„ Processing PDF: saudi_2030.pdf
2026-02-16 17:08:38,953 - root - INFO - [_pdf_to_images_fitz:253]    -> Extracting 3 pages...
2026-02-16 17:08:39,333 - __main__ - INFO - [process_ocr_pipeline:613] [Job 052a1e5ddcbeecd7] Step 2/3 - Layout analysis (3 pages)...
2026-02-16 17:50:21,699 - __main__ - INFO - [lifespan:662] ============================================================
2026-02-16 17:50:21,699 - __main__ - INFO - [lifespan:663] CustomOCR Pipeline API v2.4.0 starting...
2026-02-16 17:50:21,699 - __main__ - INFO - [lifespan:664] ============================================================
2026-02-16 17:50:21,699 - __main__ - INFO - [lifespan:665] Output Directory     : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output
2026-02-16 17:50:21,699 - __main__ - INFO - [lifespan:666] Max Upload Size      : 500 MB
2026-02-16 17:50:21,699 - __main__ - INFO - [lifespan:667] Max Workers          : 2
2026-02-16 17:50:21,699 - __main__ - INFO - [lifespan:668] Job Retention        : 24 hours
2026-02-16 17:50:21,699 - __main__ - INFO - [lifespan:669] Authentication       : ENABLED (Dynamic Katonic JWT)
2026-02-16 17:50:21,699 - __main__ - INFO - [lifespan:670] JWT Signature Verify : NO (decode-only)
2026-02-16 17:50:21,699 - __main__ - INFO - [lifespan:674] Static Tokens        : None (JWT-only mode)
2026-02-16 17:50:21,699 - __main__ - INFO - [lifespan:688] ============================================================
2026-02-16 17:50:21,699 - __main__ - INFO - [lifespan:689] API Ready. Accepting requests.
2026-02-16 17:50:21,699 - __main__ - INFO - [lifespan:690] ============================================================
2026-02-16 17:51:39,978 - __main__ - WARNING - [verify_token:470] Authentication failed â€” token ending: ...UHq0, gap-auth: N/A
2026-02-16 17:51:39,978 - __main__ - WARNING - [http_exception_handler:753] HTTP 403 on /auth/verify: Invalid API token. Please provide a valid Katonic JWT token.
Get token from: Katonic AI Studio â†’ Global Settings â†’ API Management â†’ Create API Token
2026-02-16 17:53:37,061 - __main__ - INFO - [verify_token:423] JWT auth successful â€” sub: 8eed07eef46f4282b81b5090b649447fkatonic, gap-auth: N/A
2026-02-16 17:54:18,590 - __main__ - INFO - [verify_token:423] JWT auth successful â€” sub: 8eed07eef46f4282b81b5090b649447fkatonic, gap-auth: N/A
2026-02-16 17:54:18,592 - __main__ - INFO - [process_document:961] [Job 843ae19935c0527c] Received: saudi_2030.pdf (0.06 MB) from user: 8eed07eef46f4282b81b5090b649447fkatonic
2026-02-16 17:54:26,536 - pikepdf._core - INFO - [<module>:13] pikepdf C++ to Python logger bridge initialized
2026-02-16 17:54:26,636 - __main__ - INFO - [_load_pipeline_modules:574] All pipeline modules loaded successfully
2026-02-16 17:54:26,636 - __main__ - INFO - [process_ocr_pipeline:789] [Job 843ae19935c0527c] Starting with 38 workers
2026-02-16 17:54:26,636 - __main__ - INFO - [process_ocr_pipeline:793] [Job 843ae19935c0527c] Step 1/3 - Ingesting file...
2026-02-16 17:54:26,637 - root - INFO - [_load_config:91] âœ… Loaded config from /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/resources/dla.vars.json
2026-02-16 17:54:26,646 - root - INFO - [_register_fonts:111] âœ… Loaded font for Arabic support: /usr/share/fonts/truetype/dejavu/DejaVuSans.ttf
2026-02-16 17:54:26,646 - root - INFO - [process_input:139] ðŸ“„ Processing PDF: saudi_2030.pdf
2026-02-16 17:54:26,647 - root - INFO - [_pdf_to_images_fitz:253]    -> Extracting 3 pages...
2026-02-16 17:54:27,026 - __main__ - INFO - [process_ocr_pipeline:805] [Job 843ae19935c0527c] Step 2/3 - Layout analysis (3 pages)...
2026-02-16 17:57:25,718 - __main__ - WARNING - [http_exception_handler:753] HTTP 401 on /auth/verify: Authentication required. Provide a Bearer token in the Authorization header.
Get token from: Katonic AI Studio â†’ Global Settings â†’ API Management â†’ Create API Token
2026-02-16 17:58:02,750 - __main__ - WARNING - [verify_token:470] Authentication failed â€” token ending: ...UHq0, gap-auth: N/A
2026-02-16 17:58:02,750 - __main__ - WARNING - [http_exception_handler:753] HTTP 403 on /auth/verify: Invalid API token. Please provide a valid Katonic JWT token.
Get token from: Katonic AI Studio â†’ Global Settings â†’ API Management â†’ Create API Token
2026-02-16 18:27:05,371 - __main__ - INFO - [lifespan:780] ============================================================
2026-02-16 18:27:05,371 - __main__ - INFO - [lifespan:781] CustomOCR Pipeline API v2.5.0 starting...
2026-02-16 18:27:05,371 - __main__ - INFO - [lifespan:782] ============================================================
2026-02-16 18:27:05,371 - __main__ - INFO - [lifespan:783] Output Directory        : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output
2026-02-16 18:27:05,371 - __main__ - INFO - [lifespan:784] Max Upload Size         : 500 MB
2026-02-16 18:27:05,372 - __main__ - INFO - [lifespan:785] Max Workers             : 2
2026-02-16 18:27:05,372 - __main__ - INFO - [lifespan:786] Job Retention           : 24 hours
2026-02-16 18:27:05,372 - __main__ - INFO - [lifespan:787] Authentication          : ENABLED (Katonic Platform Validation)
2026-02-16 18:27:05,372 - __main__ - INFO - [lifespan:788] Platform URL            : (auto-detect from request)
2026-02-16 18:27:05,372 - __main__ - INFO - [lifespan:789] Validate Endpoint       : (auto-discover)
2026-02-16 18:27:05,372 - __main__ - INFO - [lifespan:790] Token Cache TTL         : 300s
2026-02-16 18:27:05,372 - __main__ - INFO - [lifespan:794] Static Token Fallback   : None
2026-02-16 18:27:05,372 - __main__ - INFO - [lifespan:808] ============================================================
2026-02-16 18:27:05,372 - __main__ - INFO - [lifespan:809] API Ready. Accepting requests.
2026-02-16 18:27:05,372 - __main__ - INFO - [lifespan:810] ============================================================
2026-02-16 18:29:59,991 - __main__ - WARNING - [verify_token:522] âœ— Token REJECTED by platform (platform_rejected:401) â€” gap-auth: N/A
2026-02-16 18:29:59,992 - __main__ - WARNING - [http_exception_handler:875] HTTP 403 on /auth/verify: Token rejected by Katonic platform. Your token may be expired, revoked, or invalid.
Please generate a new token from: Katonic AI Studio â†’ Global Settings â†’ API Management â†’ Create API Token
2026-02-16 18:31:06,034 - __main__ - WARNING - [verify_token:522] âœ— Token REJECTED by platform (platform_rejected:401) â€” gap-auth: N/A
2026-02-16 18:31:06,034 - __main__ - WARNING - [http_exception_handler:875] HTTP 403 on /auth/verify: Token rejected by Katonic platform. Your token may be expired, revoked, or invalid.
Please generate a new token from: Katonic AI Studio â†’ Global Settings â†’ API Management â†’ Create API Token
2026-02-16 18:40:49,041 - __main__ - INFO - [lifespan:814] Shutting down...
2026-02-16 18:40:49,041 - __main__ - INFO - [lifespan:823] Shutdown complete.
2026-02-16 18:41:43,380 - __main__ - INFO - [lifespan:830] ============================================================
2026-02-16 18:41:43,380 - __main__ - INFO - [lifespan:831] CustomOCR Pipeline API v2.6.0 starting...
2026-02-16 18:41:43,380 - __main__ - INFO - [lifespan:832] ============================================================
2026-02-16 18:41:43,380 - __main__ - INFO - [lifespan:833] Output Directory        : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output
2026-02-16 18:41:43,380 - __main__ - INFO - [lifespan:834] Max Upload Size         : 500 MB
2026-02-16 18:41:43,380 - __main__ - INFO - [lifespan:835] Max Workers             : 2
2026-02-16 18:41:43,380 - __main__ - INFO - [lifespan:836] Job Retention           : 24 hours
2026-02-16 18:41:43,380 - __main__ - INFO - [lifespan:837] Auth Layer 1            : Gateway Trust (gap-auth header)
2026-02-16 18:41:43,380 - __main__ - INFO - [lifespan:838] Auth Layer 2            : Katonic JWT Claims (sub must contain 'katonic': True)
2026-02-16 18:41:43,380 - __main__ - INFO - [lifespan:839] Auth Layer 3            : Platform Callback (ENABLED: https://aice.modon.gov.sa)
2026-02-16 18:41:43,380 - __main__ - INFO - [lifespan:840] Token Cache TTL         : 300s
2026-02-16 18:41:43,380 - __main__ - INFO - [lifespan:855] ============================================================
2026-02-16 18:41:43,380 - __main__ - INFO - [lifespan:856] API Ready. Accepting requests.
2026-02-16 18:41:43,380 - __main__ - INFO - [lifespan:857] ============================================================
2026-02-16 18:42:41,164 - __main__ - INFO - [verify_token:518] âœ“ Auth via gateway+jwt â€” user: ashok.pravin@takween.ai, sub: 8eed07eef46f4282b81b5090b649447fkatonic
2026-02-16 18:43:49,330 - __main__ - INFO - [verify_token:518] âœ“ Auth via gateway+jwt â€” user: ashok.pravin@takween.ai, sub: 8eed07eef46f4282b81b5090b649447fkatonic
2026-02-16 18:45:53,911 - __main__ - INFO - [verify_token:518] âœ“ Auth via gateway+jwt â€” user: ashok.pravin@takween.ai, sub: 8eed07eef46f4282b81b5090b649447fkatonic
2026-02-16 18:52:10,772 - __main__ - INFO - [lifespan:861] Shutting down...
2026-02-16 18:52:10,772 - __main__ - INFO - [lifespan:870] Shutdown complete.
2026-02-16 19:00:04,686 - __main__ - INFO - [lifespan:830] ============================================================
2026-02-16 19:00:04,686 - __main__ - INFO - [lifespan:831] CustomOCR Pipeline API v2.6.0 starting...
2026-02-16 19:00:04,686 - __main__ - INFO - [lifespan:832] ============================================================
2026-02-16 19:00:04,686 - __main__ - INFO - [lifespan:833] Output Directory        : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output
2026-02-16 19:00:04,686 - __main__ - INFO - [lifespan:834] Max Upload Size         : 500 MB
2026-02-16 19:00:04,686 - __main__ - INFO - [lifespan:835] Max Workers             : 2
2026-02-16 19:00:04,686 - __main__ - INFO - [lifespan:836] Job Retention           : 24 hours
2026-02-16 19:00:04,686 - __main__ - INFO - [lifespan:837] Auth Layer 1            : Gateway Trust (gap-auth header)
2026-02-16 19:00:04,686 - __main__ - INFO - [lifespan:838] Auth Layer 2            : Katonic JWT Claims (sub must contain 'katonic': True)
2026-02-16 19:00:04,686 - __main__ - INFO - [lifespan:839] Auth Layer 3            : Platform Callback (ENABLED: https://aice.modon.gov.sa)
2026-02-16 19:00:04,686 - __main__ - INFO - [lifespan:840] Token Cache TTL         : 300s
2026-02-16 19:00:04,686 - __main__ - INFO - [lifespan:855] ============================================================
2026-02-16 19:00:04,686 - __main__ - INFO - [lifespan:856] API Ready. Accepting requests.
2026-02-16 19:00:04,687 - __main__ - INFO - [lifespan:857] ============================================================
2026-02-16 19:00:47,651 - __main__ - INFO - [verify_token:518] âœ“ Auth via gateway+jwt â€” user: ashok.pravin@takween.ai, sub: 8eed07eef46f4282b81b5090b649447fkatonic
2026-02-16 19:01:50,391 - __main__ - INFO - [lifespan:861] Shutting down...
2026-02-16 19:01:50,391 - __main__ - INFO - [lifespan:870] Shutdown complete.
2026-02-16 19:02:58,481 - __main__ - INFO - [lifespan:571] ============================================================
2026-02-16 19:02:58,481 - __main__ - INFO - [lifespan:572] CustomOCR Pipeline API v2.7.0 starting...
2026-02-16 19:02:58,481 - __main__ - INFO - [lifespan:573] ============================================================
2026-02-16 19:02:58,481 - __main__ - INFO - [lifespan:574] Output Directory     : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output
2026-02-16 19:02:58,481 - __main__ - INFO - [lifespan:575] Max Upload Size      : 500 MB
2026-02-16 19:02:58,481 - __main__ - INFO - [lifespan:576] Max Workers          : 2
2026-02-16 19:02:58,481 - __main__ - INFO - [lifespan:577] Job Retention        : 24 hours
2026-02-16 19:02:58,481 - __main__ - INFO - [lifespan:578] Auth Method          : Token Registration (SHA-256 hash match)
2026-02-16 19:02:58,481 - __main__ - INFO - [lifespan:579] Registry File        : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output/.token_registry.json
2026-02-16 19:02:58,482 - __main__ - INFO - [lifespan:587] Auto-registered      : 1 token(s) from env/file
2026-02-16 19:02:58,482 - __main__ - INFO - [lifespan:588] Total Registered     : 1 token(s)
2026-02-16 19:02:58,482 - __main__ - INFO - [lifespan:609] ============================================================
2026-02-16 19:02:58,482 - __main__ - INFO - [lifespan:610] API Ready.
2026-02-16 19:02:58,482 - __main__ - INFO - [lifespan:611] ============================================================
2026-02-16 19:04:22,637 - __main__ - WARNING - [verify_token:373] âœ— REJECTED â€” unregistered token (hash: 497430c2f8adbb65...) gateway: ashok.pravin@takween.ai
2026-02-16 19:04:22,637 - __main__ - WARNING - [http_exception_handler:669] HTTP 403 on /auth/verify: Token not recognized. Possible causes:
  â€¢ Token was never registered (use POST /auth/register-token)
  â€¢ Token was modified/tweaked after registration
  â€¢ Token was revoked via DELETE /auth/tokens/{hash}

Register your token: POST /auth/register-token
2026-02-16 22:44:46,633 - __main__ - INFO - [lifespan:359] ============================================================
2026-02-16 22:44:46,633 - __main__ - INFO - [lifespan:360] CustomOCR Pipeline API v2.4.0 starting...
2026-02-16 22:44:46,633 - __main__ - INFO - [lifespan:361] ============================================================
2026-02-16 22:44:46,633 - __main__ - INFO - [lifespan:362] Output Directory  : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output
2026-02-16 22:44:46,633 - __main__ - INFO - [lifespan:363] Max Upload Size   : 500 MB
2026-02-16 22:44:46,633 - __main__ - INFO - [lifespan:364] Max Workers       : 2
2026-02-16 22:44:46,633 - __main__ - INFO - [lifespan:365] Job Retention     : 24 hours
2026-02-16 22:44:46,633 - __main__ - INFO - [lifespan:371] Static tokens       : 1 configured
2026-02-16 23:10:56,025 - __main__ - INFO - [lifespan:771] ============================================================
2026-02-16 23:10:56,025 - __main__ - INFO - [lifespan:772] CustomOCR Pipeline API v3.1.0 starting...
2026-02-16 23:10:56,025 - __main__ - INFO - [lifespan:773] ============================================================
2026-02-16 23:10:56,025 - __main__ - INFO - [lifespan:774] Output Directory       : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output
2026-02-16 23:10:56,025 - __main__ - INFO - [lifespan:775] Max Upload Size        : 500 MB
2026-02-16 23:10:56,025 - __main__ - INFO - [lifespan:776] Max Workers            : 2
2026-02-16 23:10:56,025 - __main__ - INFO - [lifespan:777] Job Retention          : 24 hours
2026-02-16 23:10:56,025 - __main__ - INFO - [lifespan:778] Auth Method            : Direct Katonic Platform Validation (auto-discover)
2026-02-16 23:10:56,025 - __main__ - INFO - [lifespan:779] Katonic Platform URL   : https://aice.modon.gov.sa
2026-02-16 23:10:56,025 - __main__ - INFO - [lifespan:780] Validation Paths       : 21 endpoints to try
2026-02-16 23:10:56,025 - __main__ - INFO - [lifespan:781] Token Cache TTL        : 300 seconds
2026-02-16 23:10:56,025 - __main__ - INFO - [lifespan:802] ============================================================
2026-02-16 23:10:56,025 - __main__ - INFO - [lifespan:803] API Ready â€” tokens validated directly against Katonic platform.
2026-02-16 23:10:56,026 - __main__ - INFO - [lifespan:804] ============================================================
2026-02-16 23:12:08,994 - __main__ - INFO - [_discover_and_validate:409] Discovering Katonic validation endpoint at https://aice.modon.gov.sa (21 paths to try)...
2026-02-16 23:12:09,010 - httpx - INFO - [_send_single_request:1740] HTTP Request: GET https://aice.modon.gov.sa/api/v1/env/me "HTTP/1.1 401 Unauthorized"
2026-02-16 23:12:09,011 - __main__ - INFO - [_discover_and_validate:421] âœ“ Discovered Katonic validation endpoint: https://aice.modon.gov.sa/api/v1/env/me (HTTP 401)
2026-02-16 23:12:09,011 - __main__ - WARNING - [verify_token:600] âœ— REJECTED â€” sub: 8eed07eef46f4282b81b5090b649447fkatonic, gateway: ashok.pravin@takween.ai, reason: Token rejected (HTTP 401)
2026-02-16 23:12:09,011 - __main__ - WARNING - [http_exception_handler:865] HTTP 403 on /auth/verify: Token rejected by the Katonic platform.

Possible causes:
  â€¢ Token was revoked or deleted in Katonic API Management
  â€¢ Token has expired
  â€¢ Token was not created in Katonic AI Studio â†’ API Management
  â€¢ Token is malformed or incomplete

2026-02-16 23:12:51,346 - __main__ - INFO - [lifespan:808] Shutting down...
2026-02-16 23:12:51,346 - __main__ - INFO - [lifespan:818] Shutdown complete.
2026-02-16 23:13:25,835 - __main__ - INFO - [lifespan:771] ============================================================
2026-02-16 23:13:25,835 - __main__ - INFO - [lifespan:772] CustomOCR Pipeline API v3.1.0 starting...
2026-02-16 23:13:25,835 - __main__ - INFO - [lifespan:773] ============================================================
2026-02-16 23:13:25,835 - __main__ - INFO - [lifespan:774] Output Directory       : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output
2026-02-16 23:13:25,835 - __main__ - INFO - [lifespan:775] Max Upload Size        : 500 MB
2026-02-16 23:13:25,835 - __main__ - INFO - [lifespan:776] Max Workers            : 2
2026-02-16 23:13:25,835 - __main__ - INFO - [lifespan:777] Job Retention          : 24 hours
2026-02-16 23:13:25,835 - __main__ - INFO - [lifespan:778] Auth Method            : Direct Katonic Platform Validation (auto-discover)
2026-02-16 23:13:25,835 - __main__ - INFO - [lifespan:779] Katonic Platform URL   : https://aice.modon.gov.sa
2026-02-16 23:13:25,835 - __main__ - INFO - [lifespan:780] Validation Paths       : 21 endpoints to try
2026-02-16 23:13:25,835 - __main__ - INFO - [lifespan:781] Token Cache TTL        : 300 seconds
2026-02-16 23:13:25,836 - __main__ - INFO - [lifespan:802] ============================================================
2026-02-16 23:13:25,836 - __main__ - INFO - [lifespan:803] API Ready â€” tokens validated directly against Katonic platform.
2026-02-16 23:13:25,836 - __main__ - INFO - [lifespan:804] ============================================================
2026-02-16 23:15:09,119 - __main__ - INFO - [_discover_and_validate:409] Discovering Katonic validation endpoint at https://aice.modon.gov.sa (21 paths to try)...
2026-02-16 23:15:09,134 - httpx - INFO - [_send_single_request:1740] HTTP Request: GET https://aice.modon.gov.sa/api/v1/env/me "HTTP/1.1 401 Unauthorized"
2026-02-16 23:15:09,135 - __main__ - INFO - [_discover_and_validate:421] âœ“ Discovered Katonic validation endpoint: https://aice.modon.gov.sa/api/v1/env/me (HTTP 401)
2026-02-16 23:15:09,135 - __main__ - WARNING - [verify_token:600] âœ— REJECTED â€” sub: 8eed07eef46f4282b81b5090b649447fkatonic, gateway: ashok.pravin@takween.ai, reason: Token rejected (HTTP 401)
2026-02-16 23:15:09,135 - __main__ - WARNING - [http_exception_handler:865] HTTP 403 on /auth/verify: Token rejected by the Katonic platform.

Possible causes:
  â€¢ Token was revoked or deleted in Katonic API Management
  â€¢ Token has expired
  â€¢ Token was not created in Katonic AI Studio â†’ API Management
  â€¢ Token is malformed or incomplete

2026-02-16 23:16:08,201 - __main__ - WARNING - [http_exception_handler:865] HTTP 400 on /auth/discover-endpoint: Provide a valid Katonic token.
2026-02-16 23:26:04,328 - __main__ - INFO - [lifespan:868] ============================================================
2026-02-16 23:26:04,328 - __main__ - INFO - [lifespan:869] CustomOCR Pipeline API v4.0.0 starting...
2026-02-16 23:26:04,328 - __main__ - INFO - [lifespan:870] ============================================================
2026-02-16 23:26:04,328 - __main__ - INFO - [lifespan:871] Output Directory       : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output
2026-02-16 23:26:04,328 - __main__ - INFO - [lifespan:872] Max Upload Size        : 500 MB
2026-02-16 23:26:04,328 - __main__ - INFO - [lifespan:873] Max Workers            : 2
2026-02-16 23:26:04,329 - __main__ - INFO - [lifespan:874] Job Retention          : 24 hours
2026-02-16 23:26:04,329 - __main__ - INFO - [lifespan:875] Auth Method            : JWT Signature Verification (Keycloak JWKS)
2026-02-16 23:26:04,329 - __main__ - INFO - [lifespan:876] Katonic Platform URL   : https://aice.modon.gov.sa
2026-02-16 23:26:04,329 - __main__ - INFO - [lifespan:877] Keycloak JWKS URL      : https://aice.modon.gov.sa/auth/realms/katonic/protocol/openid-connect/certs
2026-02-16 23:26:04,329 - __main__ - INFO - [lifespan:878] Keycloak Realm         : (auto-discover)
2026-02-16 23:26:04,329 - __main__ - INFO - [lifespan:879] JWKS Cache TTL         : 3600 seconds
2026-02-16 23:26:04,329 - __main__ - INFO - [lifespan:880] Token Cache TTL        : 300 seconds
2026-02-16 23:26:04,329 - __main__ - INFO - [lifespan:881] PyJWT available        : True
2026-02-16 23:26:04,329 - __main__ - INFO - [lifespan:891] Discovering Keycloak JWKS at https://aice.modon.gov.sa...
2026-02-16 23:26:04,362 - httpx - INFO - [_send_single_request:1740] HTTP Request: GET https://aice.modon.gov.sa/auth/realms/katonic/protocol/openid-connect/certs "HTTP/1.1 200 OK"
2026-02-16 23:26:04,363 - __main__ - INFO - [lifespan:894] âœ“ JWKS keys loaded: 1 signing key(s) from https://aice.modon.gov.sa/auth/realms/katonic/protocol/openid-connect/certs
2026-02-16 23:26:04,363 - __main__ - INFO - [lifespan:913] ============================================================
2026-02-16 23:26:04,363 - __main__ - INFO - [lifespan:914] API Ready â€” JWT signatures verified via Keycloak public keys.
2026-02-16 23:26:04,363 - __main__ - INFO - [lifespan:915] ============================================================
2026-02-16 23:26:58,936 - __main__ - ERROR - [verify_token:691] JWT verification error: Expected a string value
Traceback (most recent call last):
  File "/home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/ocr_app.py", line 667, in verify_token
    verified_claims = _jwks_manager.verify_token(jwt_token)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/ocr_app.py", line 367, in verify_token
    decoded = pyjwt.decode(
              ^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/jwt/api_jwt.py", line 371, in decode
    decoded = self.decode_complete(
              ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/jwt/api_jwt.py", line 268, in decode_complete
    decoded = self._jws.decode_complete(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/jwt/api_jws.py", line 244, in decode_complete
    self._verify_signature(signing_input, header, signature, key, algorithms)
  File "/opt/conda/lib/python3.12/site-packages/jwt/api_jws.py", line 349, in _verify_signature
    prepared_key = alg_obj.prepare_key(key)
                   ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/jwt/algorithms.py", line 343, in prepare_key
    key_bytes = force_bytes(key)
                ^^^^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/jwt/utils.py", line 22, in force_bytes
    raise TypeError("Expected a string value")
TypeError: Expected a string value

2026-02-16 23:26:58,936 - __main__ - WARNING - [http_exception_handler:976] HTTP 403 on /auth/verify: Token verification error: Expected a string value
2026-02-16 23:29:38,967 - __main__ - INFO - [lifespan:919] Shutting down...
2026-02-16 23:29:38,967 - __main__ - INFO - [lifespan:929] Shutdown complete.
2026-02-16 23:34:18,161 - __main__ - INFO - [lifespan:887] ============================================================
2026-02-16 23:34:18,161 - __main__ - INFO - [lifespan:888] CustomOCR Pipeline API v4.0.0 starting...
2026-02-16 23:34:18,161 - __main__ - INFO - [lifespan:889] ============================================================
2026-02-16 23:34:18,162 - __main__ - INFO - [lifespan:890] Output Directory       : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output
2026-02-16 23:34:18,162 - __main__ - INFO - [lifespan:891] Max Upload Size        : 500 MB
2026-02-16 23:34:18,162 - __main__ - INFO - [lifespan:892] Max Workers            : 2
2026-02-16 23:34:18,162 - __main__ - INFO - [lifespan:893] Job Retention          : 24 hours
2026-02-16 23:34:18,162 - __main__ - INFO - [lifespan:894] Auth Method            : JWT Signature Verification (Keycloak JWKS)
2026-02-16 23:34:18,162 - __main__ - INFO - [lifespan:895] Katonic Platform URL   : https://aice.modon.gov.sa
2026-02-16 23:34:18,162 - __main__ - INFO - [lifespan:896] Keycloak JWKS URL      : https://aice.modon.gov.sa/auth/realms/katonic/protocol/openid-connect/certs
2026-02-16 23:34:18,162 - __main__ - INFO - [lifespan:897] Keycloak Realm         : (auto-discover)
2026-02-16 23:34:18,162 - __main__ - INFO - [lifespan:898] JWKS Cache TTL         : 3600 seconds
2026-02-16 23:34:18,162 - __main__ - INFO - [lifespan:899] Token Cache TTL        : 300 seconds
2026-02-16 23:34:18,162 - __main__ - INFO - [lifespan:900] PyJWT available        : True
2026-02-16 23:34:18,162 - __main__ - INFO - [lifespan:910] Discovering Keycloak JWKS at https://aice.modon.gov.sa...
2026-02-16 23:34:18,186 - httpx - INFO - [_send_single_request:1740] HTTP Request: GET https://aice.modon.gov.sa/auth/realms/katonic/protocol/openid-connect/certs "HTTP/1.1 200 OK"
2026-02-16 23:34:18,187 - __main__ - INFO - [lifespan:913] âœ“ JWKS keys loaded: 1 signing key(s) from https://aice.modon.gov.sa/auth/realms/katonic/protocol/openid-connect/certs
2026-02-16 23:34:18,187 - __main__ - INFO - [lifespan:932] ============================================================
2026-02-16 23:34:18,187 - __main__ - INFO - [lifespan:933] API Ready â€” JWT signatures verified via Keycloak public keys.
2026-02-16 23:34:18,187 - __main__ - INFO - [lifespan:934] ============================================================
2026-02-16 23:35:53,619 - __main__ - ERROR - [verify_token:710] JWT verification error: The specified key is an asymmetric key or x509 certificate and should not be used as an HMAC secret.
Traceback (most recent call last):
  File "/home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/ocr_app.py", line 686, in verify_token
    verified_claims = _jwks_manager.verify_token(jwt_token)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/ocr_app.py", line 386, in verify_token
    decoded = pyjwt.decode(
              ^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/jwt/api_jwt.py", line 371, in decode
    decoded = self.decode_complete(
              ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/jwt/api_jwt.py", line 268, in decode_complete
    decoded = self._jws.decode_complete(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/jwt/api_jws.py", line 244, in decode_complete
    self._verify_signature(signing_input, header, signature, key, algorithms)
  File "/opt/conda/lib/python3.12/site-packages/jwt/api_jws.py", line 349, in _verify_signature
    prepared_key = alg_obj.prepare_key(key)
                   ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/jwt/algorithms.py", line 346, in prepare_key
    raise InvalidKeyError(
jwt.exceptions.InvalidKeyError: The specified key is an asymmetric key or x509 certificate and should not be used as an HMAC secret.

2026-02-16 23:35:53,619 - __main__ - WARNING - [http_exception_handler:995] HTTP 403 on /auth/verify: Token verification error: The specified key is an asymmetric key or x509 certificate and should not be used as an HMAC secret.
2026-02-16 23:37:21,200 - __main__ - ERROR - [verify_token:710] JWT verification error: The specified key is an asymmetric key or x509 certificate and should not be used as an HMAC secret.
Traceback (most recent call last):
  File "/home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/ocr_app.py", line 686, in verify_token
    verified_claims = _jwks_manager.verify_token(jwt_token)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/ocr_app.py", line 386, in verify_token
    decoded = pyjwt.decode(
              ^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/jwt/api_jwt.py", line 371, in decode
    decoded = self.decode_complete(
              ^^^^^^^^^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/jwt/api_jwt.py", line 268, in decode_complete
    decoded = self._jws.decode_complete(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/jwt/api_jws.py", line 244, in decode_complete
    self._verify_signature(signing_input, header, signature, key, algorithms)
  File "/opt/conda/lib/python3.12/site-packages/jwt/api_jws.py", line 349, in _verify_signature
    prepared_key = alg_obj.prepare_key(key)
                   ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/jwt/algorithms.py", line 346, in prepare_key
    raise InvalidKeyError(
jwt.exceptions.InvalidKeyError: The specified key is an asymmetric key or x509 certificate and should not be used as an HMAC secret.

2026-02-16 23:37:21,200 - __main__ - WARNING - [http_exception_handler:995] HTTP 403 on /auth/verify: Token verification error: The specified key is an asymmetric key or x509 certificate and should not be used as an HMAC secret.
2026-02-16 23:37:51,096 - __main__ - INFO - [lifespan:938] Shutting down...
2026-02-16 23:37:51,096 - __main__ - INFO - [lifespan:948] Shutdown complete.
2026-02-16 23:51:16,756 - __main__ - INFO - [lifespan:349] ============================================================
2026-02-16 23:51:16,756 - __main__ - INFO - [lifespan:350] CustomOCR Pipeline API v2.3.0 starting...
2026-02-16 23:51:16,756 - __main__ - INFO - [lifespan:351] ============================================================
2026-02-16 23:51:16,756 - __main__ - INFO - [lifespan:354] Output Directory : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output
2026-02-16 23:51:16,756 - __main__ - INFO - [lifespan:355] Completed Dir    : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output/completed
2026-02-16 23:51:16,756 - __main__ - INFO - [lifespan:356] Max Upload Size  : 500 MB
2026-02-16 23:51:16,756 - __main__ - INFO - [lifespan:357] Max Workers      : 2
2026-02-16 23:51:16,756 - __main__ - INFO - [lifespan:358] Job Retention    : 24 hours
2026-02-16 23:51:16,756 - __main__ - INFO - [lifespan:359] Allowed Extensions: 23 types
2026-02-16 23:51:16,756 - __main__ - INFO - [lifespan:364] Auth Token       : Configured (eyJh****JYgM)
2026-02-16 23:51:16,757 - __main__ - INFO - [lifespan:374] Output directory: Writable âœ“
2026-02-16 23:51:16,757 - __main__ - INFO - [lifespan:381] Thread pool initialized with 2 workers
2026-02-16 23:51:16,757 - __main__ - INFO - [lifespan:389] ============================================================
2026-02-16 23:51:16,757 - __main__ - INFO - [lifespan:390] API Ready. Accepting requests.
2026-02-16 23:51:16,757 - __main__ - INFO - [lifespan:391] ============================================================
2026-02-16 23:52:36,391 - __main__ - INFO - [process_document:710] [Job cfd3b3574b23fe0a] Received: saudi_2030.pdf (0.06 MB)
2026-02-16 23:52:44,514 - pikepdf._core - INFO - [<module>:13] pikepdf C++ to Python logger bridge initialized
2026-02-16 23:52:44,612 - __main__ - INFO - [_load_pipeline_modules:237] All pipeline modules loaded successfully
2026-02-16 23:52:44,612 - __main__ - INFO - [process_ocr_pipeline:513] [Job cfd3b3574b23fe0a] Starting pipeline with 38 workers
2026-02-16 23:52:44,612 - __main__ - INFO - [process_ocr_pipeline:517] [Job cfd3b3574b23fe0a] Step 1/3 - Ingesting file...
2026-02-16 23:52:44,613 - root - INFO - [_load_config:91] âœ… Loaded config from /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/resources/dla.vars.json
2026-02-16 23:52:44,621 - root - INFO - [_register_fonts:111] âœ… Loaded font for Arabic support: /usr/share/fonts/truetype/dejavu/DejaVuSans.ttf
2026-02-16 23:52:44,622 - root - INFO - [process_input:139] ðŸ“„ Processing PDF: saudi_2030.pdf
2026-02-16 23:52:44,622 - root - INFO - [_pdf_to_images_fitz:253]    -> Extracting 3 pages...
2026-02-16 23:52:45,008 - __main__ - INFO - [process_ocr_pipeline:529] [Job cfd3b3574b23fe0a] Step 2/3 - Analyzing document layout (3 pages)...
2026-02-16 23:54:43,826 - __main__ - WARNING - [verify_token:177] Authentication failed: invalid token attempt
2026-02-16 23:54:43,827 - __main__ - WARNING - [http_exception_handler:469] HTTP 401 on /process: Invalid or expired token. Please check your API token from Katonic AI Studio â†’ API Management.
2026-02-16 23:56:45,701 - __main__ - WARNING - [verify_token:177] Authentication failed: invalid token attempt
2026-02-16 23:56:45,701 - __main__ - WARNING - [http_exception_handler:469] HTTP 401 on /process: Invalid or expired token. Please check your API token from Katonic AI Studio â†’ API Management.
2026-02-17 00:15:09,948 - __main__ - INFO - [lifespan:545] ============================================================
2026-02-17 00:15:09,948 - __main__ - INFO - [lifespan:546] CustomOCR Pipeline API v2.4.0 starting...
2026-02-17 00:15:09,948 - __main__ - INFO - [lifespan:547] ============================================================
2026-02-17 00:15:09,948 - __main__ - INFO - [lifespan:550] Output Directory : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output
2026-02-17 00:15:09,948 - __main__ - INFO - [lifespan:551] Completed Dir    : /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/output/completed
2026-02-17 00:15:09,948 - __main__ - INFO - [lifespan:552] Max Upload Size  : 500 MB
2026-02-17 00:15:09,948 - __main__ - INFO - [lifespan:553] Max Workers      : 2
2026-02-17 00:15:09,948 - __main__ - INFO - [lifespan:554] Job Retention    : 24 hours
2026-02-17 00:15:09,948 - __main__ - INFO - [lifespan:555] Allowed Extensions: 23 types
2026-02-17 00:15:09,948 - __main__ - INFO - [lifespan:558] ----------------------------------------
2026-02-17 00:15:09,948 - __main__ - INFO - [lifespan:559] AUTHENTICATION CONFIG:
2026-02-17 00:15:09,948 - __main__ - INFO - [lifespan:560]   PyJWT installed   : Yes
2026-02-17 00:15:09,948 - __main__ - INFO - [lifespan:561]   JWT Secret        : Not set (expiry-only validation)
2026-02-17 00:15:09,948 - __main__ - INFO - [lifespan:562]   Static tokens     : 1 configured
2026-02-17 00:15:09,948 - __main__ - INFO - [lifespan:563]   JWT Algorithms    : ['HS256']
2026-02-17 00:15:09,949 - __main__ - INFO - [lifespan:566]   -> JWT validation enabled: ALL Katonic platform tokens accepted automatically
2026-02-17 00:15:09,949 - __main__ - INFO - [lifespan:573] ----------------------------------------
2026-02-17 00:15:09,949 - __main__ - INFO - [lifespan:580] Output directory: Writable
2026-02-17 00:15:09,949 - __main__ - INFO - [lifespan:587] Thread pool initialized with 2 workers
2026-02-17 00:15:09,949 - __main__ - INFO - [lifespan:595] ============================================================
2026-02-17 00:15:09,949 - __main__ - INFO - [lifespan:596] API Ready. Accepting requests.
2026-02-17 00:15:09,949 - __main__ - INFO - [lifespan:597] ============================================================
2026-02-17 00:16:26,887 - __main__ - INFO - [validate_jwt_token:219] JWT validated successfully â€” sub: 8eed07eef46f4282b81b5090b649447fkatonic, exp: 33296725523023
2026-02-17 00:16:26,891 - __main__ - INFO - [process_document:930] [Job 4631c3f0f18bd673] Received: Reasons to use Nextcloud.pdf (0.93 MB)
2026-02-17 00:16:34,340 - pikepdf._core - INFO - [<module>:13] pikepdf C++ to Python logger bridge initialized
2026-02-17 00:16:34,353 - __main__ - INFO - [_load_pipeline_modules:433] All pipeline modules loaded successfully
2026-02-17 00:16:34,354 - __main__ - INFO - [process_ocr_pipeline:721] [Job 4631c3f0f18bd673] Starting pipeline with 38 workers
2026-02-17 00:16:34,354 - __main__ - INFO - [process_ocr_pipeline:725] [Job 4631c3f0f18bd673] Step 1/3 - Ingesting file...
2026-02-17 00:16:34,354 - root - INFO - [_load_config:91] âœ… Loaded config from /home/katonic/workspace/upd-custom-ocr-pipeline-fastapi copy/resources/dla.vars.json
2026-02-17 00:16:34,363 - root - INFO - [_register_fonts:111] âœ… Loaded font for Arabic support: /usr/share/fonts/truetype/dejavu/DejaVuSans.ttf
2026-02-17 00:16:34,364 - root - INFO - [process_input:139] ðŸ“„ Processing PDF: Reasons to use Nextcloud.pdf
2026-02-17 00:16:34,366 - root - INFO - [_pdf_to_images_fitz:253]    -> Extracting 8 pages...
2026-02-17 00:16:36,896 - __main__ - INFO - [process_ocr_pipeline:737] [Job 4631c3f0f18bd673] Step 2/3 - Analyzing document layout (8 pages)...
2026-02-17 00:19:33,472 - __main__ - WARNING - [validate_token_comprehensive:314] Authentication failed: JWT: Not a valid JWT format: Invalid crypto padding | Static: Token does not match any configured static tokens
2026-02-17 00:19:33,472 - __main__ - WARNING - [http_exception_handler:677] HTTP 401 on /process: Invalid or expired token. Please check your API token from Katonic AI Studio â†’ API Management. If you just created a new token, ensure it has not expired.
2026-02-17 00:22:26,856 - __main__ - WARNING - [validate_token_comprehensive:314] Authentication failed: JWT: Not a valid JWT format: Invalid crypto padding | Static: Token does not match any configured static tokens
2026-02-17 00:22:26,857 - __main__ - WARNING - [http_exception_handler:677] HTTP 401 on /process: Invalid or expired token. Please check your API token from Katonic AI Studio â†’ API Management. If you just created a new token, ensure it has not expired.
2026-02-17 18:10:40,143 - __main__ - INFO - [lifespan:383] ============================================================
2026-02-17 18:10:40,143 - __main__ - INFO - [lifespan:384] CustomOCR Pipeline API v2.5.0 starting...
2026-02-17 18:10:40,143 - __main__ - INFO - [lifespan:385] ============================================================
2026-02-17 18:10:40,143 - __main__ - INFO - [lifespan:388] Output Directory   : /home/katonic/workspace/ocr-pipeline-fastapi/output
2026-02-17 18:10:40,143 - __main__ - INFO - [lifespan:389] Completed Dir      : /home/katonic/workspace/ocr-pipeline-fastapi/output/completed
2026-02-17 18:10:40,143 - __main__ - INFO - [lifespan:390] Max Upload Size    : 500 MB
2026-02-17 18:10:40,143 - __main__ - INFO - [lifespan:391] Max Workers        : 2
2026-02-17 18:10:40,143 - __main__ - INFO - [lifespan:392] Job Retention      : 24 hours
2026-02-17 18:10:40,143 - __main__ - INFO - [lifespan:393] Allowed Extensions : 23 types
2026-02-17 18:10:40,143 - __main__ - INFO - [lifespan:396] --- Authentication ---
2026-02-17 18:10:40,143 - __main__ - INFO - [lifespan:398]   Configured Tokens: 3
2026-02-17 18:10:40,143 - __main__ - INFO - [lifespan:405]   AUTH_TOKEN_1    : REQUEST_AP****UtVo âœ“
2026-02-17 18:10:40,143 - __main__ - INFO - [lifespan:405]   AUTH_TOKEN_2    : REQUEST_AP****ATE4 âœ“
2026-02-17 18:10:40,143 - __main__ - INFO - [lifespan:405]   AUTH_TOKEN_3    : REQUEST_AP****18gA âœ“
2026-02-17 18:10:40,143 - __main__ - INFO - [lifespan:407]   AUTH_TOKEN_4    : (empty)
2026-02-17 18:10:40,143 - __main__ - INFO - [lifespan:407]   AUTH_TOKEN_5    : (empty)
2026-02-17 18:10:40,143 - __main__ - INFO - [lifespan:407]   AUTH_TOKEN_6    : (empty)
2026-02-17 18:10:40,143 - __main__ - INFO - [lifespan:407]   AUTH_TOKEN_7    : (empty)
2026-02-17 18:10:40,144 - __main__ - INFO - [lifespan:407]   AUTH_TOKEN_8    : (empty)
2026-02-17 18:10:40,144 - __main__ - INFO - [lifespan:407]   AUTH_TOKEN_9    : (empty)
2026-02-17 18:10:40,144 - __main__ - INFO - [lifespan:407]   AUTH_TOKEN_10    : (empty)
2026-02-17 18:10:40,144 - __main__ - INFO - [lifespan:414] --- End Authentication ---
2026-02-17 18:10:40,144 - __main__ - INFO - [lifespan:421] Output directory: Writable âœ“
2026-02-17 18:10:40,144 - __main__ - INFO - [lifespan:428] Thread pool initialized with 2 workers
2026-02-17 18:10:40,144 - __main__ - INFO - [lifespan:436] ============================================================
2026-02-17 18:10:40,144 - __main__ - INFO - [lifespan:437] API Ready. Accepting requests.
2026-02-17 18:10:40,144 - __main__ - INFO - [lifespan:438] ============================================================
2026-02-17 18:11:44,919 - __main__ - WARNING - [verify_token:225] Authentication failed: token does not match any configured token
2026-02-17 18:11:44,919 - __main__ - WARNING - [http_exception_handler:514] HTTP 401 on /process: Invalid or expired token. Please check your API token from Katonic AI Studio â†’ API Management. If this is a newly created token, ensure it has been added to the .env file and the API has been restarted.
2026-02-17 18:12:03,620 - __main__ - INFO - [process_document:739] [Job 12f54a8b501f6b75] Received: saudi_2030.pdf (0.06 MB)
2026-02-17 18:12:04,916 - matplotlib.font_manager - INFO - [_load_fontmanager:1639] generated new fontManager
2026-02-17 18:12:14,984 - __main__ - ERROR - [_load_pipeline_modules:276] Failed to import DLA: numpy.core.multiarray failed to import
2026-02-17 18:12:14,985 - __main__ - ERROR - [process_ocr_pipeline:615] [Job 12f54a8b501f6b75] Failed at step 'initialization': Pipeline dependency missing: DLA - numpy.core.multiarray failed to import
Traceback (most recent call last):
  File "/home/katonic/workspace/ocr-pipeline-fastapi/ocr_app.py", line 273, in _load_pipeline_modules
    from DLA import DLA
  File "/home/katonic/workspace/ocr-pipeline-fastapi/DLA.py", line 12, in <module>
    from paddleocr import LayoutDetection
  File "/opt/conda/lib/python3.11/site-packages/paddleocr/__init__.py", line 15, in <module>
    from paddlex.inference.utils.benchmark import benchmark
  File "/opt/conda/lib/python3.11/site-packages/paddlex/__init__.py", line 49, in <module>
    from .inference import create_pipeline, create_predictor
  File "/opt/conda/lib/python3.11/site-packages/paddlex/inference/__init__.py", line 16, in <module>
    from .models import create_predictor
  File "/opt/conda/lib/python3.11/site-packages/paddlex/inference/models/__init__.py", line 26, in <module>
    from .anomaly_detection import UadPredictor
  File "/opt/conda/lib/python3.11/site-packages/paddlex/inference/models/anomaly_detection/__init__.py", line 15, in <module>
    from .predictor import UadPredictor
  File "/opt/conda/lib/python3.11/site-packages/paddlex/inference/models/anomaly_detection/predictor.py", line 23, in <module>
    from ..base import BasePredictor
  File "/opt/conda/lib/python3.11/site-packages/paddlex/inference/models/base/__init__.py", line 15, in <module>
    from .predictor import BasePredictor
  File "/opt/conda/lib/python3.11/site-packages/paddlex/inference/models/base/predictor/__init__.py", line 15, in <module>
    from .base_predictor import BasePredictor
  File "/opt/conda/lib/python3.11/site-packages/paddlex/inference/models/base/predictor/base_predictor.py", line 39, in <module>
    from ...common import HPInfer, PaddleInfer
  File "/opt/conda/lib/python3.11/site-packages/paddlex/inference/models/common/__init__.py", line 17, in <module>
    from .ts import BuildTSDataset, TimeFeature, TSCutOff, TSNormalize, TStoArray, TStoBatch
  File "/opt/conda/lib/python3.11/site-packages/paddlex/inference/models/common/ts/__init__.py", line 15, in <module>
    from .processors import *
  File "/opt/conda/lib/python3.11/site-packages/paddlex/inference/models/common/ts/processors.py", line 22, in <module>
    from .funcs import load_from_dataframe, time_feature
  File "/opt/conda/lib/python3.11/site-packages/paddlex/inference/models/common/ts/funcs.py", line 29, in <module>
    from sklearn.preprocessing import StandardScaler
  File "/opt/conda/lib/python3.11/site-packages/sklearn/__init__.py", line 70, in <module>
    from sklearn.base import clone  # noqa: E402
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.11/site-packages/sklearn/base.py", line 19, in <module>
    from sklearn.utils._metadata_requests import _MetadataRequester, _routing_enabled
  File "/opt/conda/lib/python3.11/site-packages/sklearn/utils/__init__.py", line 9, in <module>
    from sklearn.utils._chunking import gen_batches, gen_even_slices
  File "/opt/conda/lib/python3.11/site-packages/sklearn/utils/_chunking.py", line 11, in <module>
    from sklearn.utils._param_validation import Interval, validate_params
  File "/opt/conda/lib/python3.11/site-packages/sklearn/utils/_param_validation.py", line 17, in <module>
    from sklearn.utils.validation import _is_arraylike_not_scalar
  File "/opt/conda/lib/python3.11/site-packages/sklearn/utils/validation.py", line 24, in <module>
    from sklearn.utils._array_api import (
  File "/opt/conda/lib/python3.11/site-packages/sklearn/utils/_array_api.py", line 20, in <module>
    from sklearn.utils.fixes import parse_version
  File "/opt/conda/lib/python3.11/site-packages/sklearn/utils/fixes.py", line 389, in <module>
    import pyarrow
  File "/opt/conda/lib/python3.11/site-packages/pyarrow/__init__.py", line 65, in <module>
    import pyarrow.lib as _lib
  File "pyarrow/lib.pyx", line 36, in init pyarrow.lib
ImportError: numpy.core.multiarray failed to import

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/katonic/workspace/ocr-pipeline-fastapi/ocr_app.py", line 544, in process_ocr_pipeline
    _load_pipeline_modules()
  File "/home/katonic/workspace/ocr-pipeline-fastapi/ocr_app.py", line 277, in _load_pipeline_modules
    raise RuntimeError(f"Pipeline dependency missing: DLA - {e}")
RuntimeError: Pipeline dependency missing: DLA - numpy.core.multiarray failed to import

2026-02-17 18:12:14,985 - __main__ - INFO - [cleanup_job_directory:632] Cleaned up: 12f54a8b501f6b75
2026-02-17 18:12:43,011 - __main__ - INFO - [lifespan:443] CustomOCR Pipeline API shutting down...
2026-02-17 18:12:43,011 - __main__ - INFO - [periodic_job_cleanup:939] Periodic cleanup task cancelled
2026-02-17 18:12:43,012 - __main__ - INFO - [lifespan:454] Thread pool shut down
2026-02-17 18:12:43,012 - __main__ - INFO - [lifespan:456] Shutdown complete.
2026-02-17 18:13:21,580 - __main__ - INFO - [lifespan:383] ============================================================
2026-02-17 18:13:21,580 - __main__ - INFO - [lifespan:384] CustomOCR Pipeline API v2.5.0 starting...
2026-02-17 18:13:21,580 - __main__ - INFO - [lifespan:385] ============================================================
2026-02-17 18:13:21,580 - __main__ - INFO - [lifespan:388] Output Directory   : /home/katonic/workspace/ocr-pipeline-fastapi/output
2026-02-17 18:13:21,580 - __main__ - INFO - [lifespan:389] Completed Dir      : /home/katonic/workspace/ocr-pipeline-fastapi/output/completed
2026-02-17 18:13:21,580 - __main__ - INFO - [lifespan:390] Max Upload Size    : 500 MB
2026-02-17 18:13:21,581 - __main__ - INFO - [lifespan:391] Max Workers        : 2
2026-02-17 18:13:21,581 - __main__ - INFO - [lifespan:392] Job Retention      : 24 hours
2026-02-17 18:13:21,581 - __main__ - INFO - [lifespan:393] Allowed Extensions : 23 types
2026-02-17 18:13:21,581 - __main__ - INFO - [lifespan:396] --- Authentication ---
2026-02-17 18:13:21,581 - __main__ - INFO - [lifespan:398]   Configured Tokens: 3
2026-02-17 18:13:21,581 - __main__ - INFO - [lifespan:405]   AUTH_TOKEN_1    : REQUEST_AP****UtVo âœ“
2026-02-17 18:13:21,581 - __main__ - INFO - [lifespan:405]   AUTH_TOKEN_2    : REQUEST_AP****ATE4 âœ“
2026-02-17 18:13:21,581 - __main__ - INFO - [lifespan:405]   AUTH_TOKEN_3    : REQUEST_AP****18gA âœ“
2026-02-17 18:13:21,581 - __main__ - INFO - [lifespan:407]   AUTH_TOKEN_4    : (empty)
2026-02-17 18:13:21,581 - __main__ - INFO - [lifespan:407]   AUTH_TOKEN_5    : (empty)
2026-02-17 18:13:21,581 - __main__ - INFO - [lifespan:407]   AUTH_TOKEN_6    : (empty)
2026-02-17 18:13:21,581 - __main__ - INFO - [lifespan:407]   AUTH_TOKEN_7    : (empty)
2026-02-17 18:13:21,581 - __main__ - INFO - [lifespan:407]   AUTH_TOKEN_8    : (empty)
2026-02-17 18:13:21,581 - __main__ - INFO - [lifespan:407]   AUTH_TOKEN_9    : (empty)
2026-02-17 18:13:21,581 - __main__ - INFO - [lifespan:407]   AUTH_TOKEN_10    : (empty)
2026-02-17 18:13:21,581 - __main__ - INFO - [lifespan:414] --- End Authentication ---
2026-02-17 18:13:21,581 - __main__ - INFO - [lifespan:421] Output directory: Writable âœ“
2026-02-17 18:13:21,581 - __main__ - INFO - [lifespan:428] Thread pool initialized with 2 workers
2026-02-17 18:13:21,581 - __main__ - INFO - [lifespan:436] ============================================================
2026-02-17 18:13:21,581 - __main__ - INFO - [lifespan:437] API Ready. Accepting requests.
2026-02-17 18:13:21,581 - __main__ - INFO - [lifespan:438] ============================================================
2026-02-17 18:13:58,863 - __main__ - INFO - [process_document:739] [Job e1558b4f42bb2597] Received: saudi_2030.pdf (0.06 MB)
2026-02-17 18:14:04,857 - __main__ - ERROR - [_load_pipeline_modules:276] Failed to import DLA: numpy.core.multiarray failed to import
2026-02-17 18:14:04,858 - __main__ - ERROR - [process_ocr_pipeline:615] [Job e1558b4f42bb2597] Failed at step 'initialization': Pipeline dependency missing: DLA - numpy.core.multiarray failed to import
Traceback (most recent call last):
  File "/home/katonic/workspace/ocr-pipeline-fastapi/ocr_app.py", line 273, in _load_pipeline_modules
    from DLA import DLA
  File "/home/katonic/workspace/ocr-pipeline-fastapi/DLA.py", line 12, in <module>
    from paddleocr import LayoutDetection
  File "/opt/conda/lib/python3.11/site-packages/paddleocr/__init__.py", line 15, in <module>
    from paddlex.inference.utils.benchmark import benchmark
  File "/opt/conda/lib/python3.11/site-packages/paddlex/__init__.py", line 49, in <module>
    from .inference import create_pipeline, create_predictor
  File "/opt/conda/lib/python3.11/site-packages/paddlex/inference/__init__.py", line 16, in <module>
    from .models import create_predictor
  File "/opt/conda/lib/python3.11/site-packages/paddlex/inference/models/__init__.py", line 26, in <module>
    from .anomaly_detection import UadPredictor
  File "/opt/conda/lib/python3.11/site-packages/paddlex/inference/models/anomaly_detection/__init__.py", line 15, in <module>
    from .predictor import UadPredictor
  File "/opt/conda/lib/python3.11/site-packages/paddlex/inference/models/anomaly_detection/predictor.py", line 23, in <module>
    from ..base import BasePredictor
  File "/opt/conda/lib/python3.11/site-packages/paddlex/inference/models/base/__init__.py", line 15, in <module>
    from .predictor import BasePredictor
  File "/opt/conda/lib/python3.11/site-packages/paddlex/inference/models/base/predictor/__init__.py", line 15, in <module>
    from .base_predictor import BasePredictor
  File "/opt/conda/lib/python3.11/site-packages/paddlex/inference/models/base/predictor/base_predictor.py", line 39, in <module>
    from ...common import HPInfer, PaddleInfer
  File "/opt/conda/lib/python3.11/site-packages/paddlex/inference/models/common/__init__.py", line 17, in <module>
    from .ts import BuildTSDataset, TimeFeature, TSCutOff, TSNormalize, TStoArray, TStoBatch
  File "/opt/conda/lib/python3.11/site-packages/paddlex/inference/models/common/ts/__init__.py", line 15, in <module>
    from .processors import *
  File "/opt/conda/lib/python3.11/site-packages/paddlex/inference/models/common/ts/processors.py", line 22, in <module>
    from .funcs import load_from_dataframe, time_feature
  File "/opt/conda/lib/python3.11/site-packages/paddlex/inference/models/common/ts/funcs.py", line 29, in <module>
    from sklearn.preprocessing import StandardScaler
  File "/opt/conda/lib/python3.11/site-packages/sklearn/__init__.py", line 70, in <module>
    from sklearn.base import clone  # noqa: E402
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.11/site-packages/sklearn/base.py", line 19, in <module>
    from sklearn.utils._metadata_requests import _MetadataRequester, _routing_enabled
  File "/opt/conda/lib/python3.11/site-packages/sklearn/utils/__init__.py", line 9, in <module>
    from sklearn.utils._chunking import gen_batches, gen_even_slices
  File "/opt/conda/lib/python3.11/site-packages/sklearn/utils/_chunking.py", line 11, in <module>
    from sklearn.utils._param_validation import Interval, validate_params
  File "/opt/conda/lib/python3.11/site-packages/sklearn/utils/_param_validation.py", line 17, in <module>
    from sklearn.utils.validation import _is_arraylike_not_scalar
  File "/opt/conda/lib/python3.11/site-packages/sklearn/utils/validation.py", line 24, in <module>
    from sklearn.utils._array_api import (
  File "/opt/conda/lib/python3.11/site-packages/sklearn/utils/_array_api.py", line 20, in <module>
    from sklearn.utils.fixes import parse_version
  File "/opt/conda/lib/python3.11/site-packages/sklearn/utils/fixes.py", line 389, in <module>
    import pyarrow
  File "/opt/conda/lib/python3.11/site-packages/pyarrow/__init__.py", line 65, in <module>
    import pyarrow.lib as _lib
  File "pyarrow/lib.pyx", line 36, in init pyarrow.lib
ImportError: numpy.core.multiarray failed to import

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/katonic/workspace/ocr-pipeline-fastapi/ocr_app.py", line 544, in process_ocr_pipeline
    _load_pipeline_modules()
  File "/home/katonic/workspace/ocr-pipeline-fastapi/ocr_app.py", line 277, in _load_pipeline_modules
    raise RuntimeError(f"Pipeline dependency missing: DLA - {e}")
RuntimeError: Pipeline dependency missing: DLA - numpy.core.multiarray failed to import

2026-02-17 18:14:04,858 - __main__ - INFO - [cleanup_job_directory:632] Cleaned up: e1558b4f42bb2597
2026-02-17 18:21:24,297 - __main__ - INFO - [lifespan:443] CustomOCR Pipeline API shutting down...
2026-02-17 18:21:24,297 - __main__ - INFO - [periodic_job_cleanup:939] Periodic cleanup task cancelled
2026-02-17 18:21:24,297 - __main__ - INFO - [lifespan:454] Thread pool shut down
2026-02-17 18:21:24,298 - __main__ - INFO - [lifespan:456] Shutdown complete.
2026-02-17 18:23:29,114 - __main__ - INFO - [lifespan:383] ============================================================
2026-02-17 18:23:29,114 - __main__ - INFO - [lifespan:384] CustomOCR Pipeline API v2.5.0 starting...
2026-02-17 18:23:29,114 - __main__ - INFO - [lifespan:385] ============================================================
2026-02-17 18:23:29,114 - __main__ - INFO - [lifespan:388] Output Directory   : /home/katonic/workspace/ocr-pipeline-fastapi/output
2026-02-17 18:23:29,114 - __main__ - INFO - [lifespan:389] Completed Dir      : /home/katonic/workspace/ocr-pipeline-fastapi/output/completed
2026-02-17 18:23:29,115 - __main__ - INFO - [lifespan:390] Max Upload Size    : 500 MB
2026-02-17 18:23:29,115 - __main__ - INFO - [lifespan:391] Max Workers        : 2
2026-02-17 18:23:29,115 - __main__ - INFO - [lifespan:392] Job Retention      : 24 hours
2026-02-17 18:23:29,115 - __main__ - INFO - [lifespan:393] Allowed Extensions : 23 types
2026-02-17 18:23:29,115 - __main__ - INFO - [lifespan:396] --- Authentication ---
2026-02-17 18:23:29,115 - __main__ - INFO - [lifespan:398]   Configured Tokens: 3
2026-02-17 18:23:29,115 - __main__ - INFO - [lifespan:405]   AUTH_TOKEN_1    : REQUEST_AP****UtVo âœ“
2026-02-17 18:23:29,115 - __main__ - INFO - [lifespan:405]   AUTH_TOKEN_2    : REQUEST_AP****ATE4 âœ“
2026-02-17 18:23:29,115 - __main__ - INFO - [lifespan:405]   AUTH_TOKEN_3    : REQUEST_AP****18gA âœ“
2026-02-17 18:23:29,115 - __main__ - INFO - [lifespan:407]   AUTH_TOKEN_4    : (empty)
2026-02-17 18:23:29,115 - __main__ - INFO - [lifespan:407]   AUTH_TOKEN_5    : (empty)
2026-02-17 18:23:29,115 - __main__ - INFO - [lifespan:407]   AUTH_TOKEN_6    : (empty)
2026-02-17 18:23:29,115 - __main__ - INFO - [lifespan:407]   AUTH_TOKEN_7    : (empty)
2026-02-17 18:23:29,115 - __main__ - INFO - [lifespan:407]   AUTH_TOKEN_8    : (empty)
2026-02-17 18:23:29,115 - __main__ - INFO - [lifespan:407]   AUTH_TOKEN_9    : (empty)
2026-02-17 18:23:29,115 - __main__ - INFO - [lifespan:407]   AUTH_TOKEN_10    : (empty)
2026-02-17 18:23:29,115 - __main__ - INFO - [lifespan:414] --- End Authentication ---
2026-02-17 18:23:29,115 - __main__ - INFO - [lifespan:421] Output directory: Writable âœ“
2026-02-17 18:23:29,115 - __main__ - INFO - [lifespan:428] Thread pool initialized with 2 workers
2026-02-17 18:23:29,115 - __main__ - INFO - [lifespan:436] ============================================================
2026-02-17 18:23:29,115 - __main__ - INFO - [lifespan:437] API Ready. Accepting requests.
2026-02-17 18:23:29,115 - __main__ - INFO - [lifespan:438] ============================================================
2026-02-17 18:24:21,410 - __main__ - INFO - [process_document:739] [Job bc69557c45788679] Received: saudi_2030.pdf (0.06 MB)
2026-02-17 18:24:26,675 - pikepdf._core - INFO - [<module>:13] pikepdf C++ to Python logger bridge initialized
2026-02-17 18:24:26,698 - __main__ - INFO - [_load_pipeline_modules:286] All pipeline modules loaded successfully
2026-02-17 18:24:26,698 - __main__ - INFO - [process_ocr_pipeline:551] [Job bc69557c45788679] Starting pipeline with 18 workers
2026-02-17 18:24:26,698 - __main__ - INFO - [process_ocr_pipeline:555] [Job bc69557c45788679] Step 1/3 - Ingesting file...
2026-02-17 18:24:26,698 - root - INFO - [_load_config:91] âœ… Loaded config from /home/katonic/workspace/ocr-pipeline-fastapi/resources/dla.vars.json
2026-02-17 18:24:26,710 - root - INFO - [_register_fonts:111] âœ… Loaded font for Arabic support: /usr/share/fonts/truetype/dejavu/DejaVuSans.ttf
2026-02-17 18:24:26,711 - root - INFO - [process_input:139] ðŸ“„ Processing PDF: saudi_2030.pdf
2026-02-17 18:24:26,715 - root - INFO - [_pdf_to_images_fitz:253]    -> Extracting 3 pages...
2026-02-17 18:24:27,135 - __main__ - INFO - [process_ocr_pipeline:567] [Job bc69557c45788679] Step 2/3 - Analyzing layout (3 pages)...
2026-02-17 18:25:52,806 - __main__ - WARNING - [verify_token:225] Authentication failed: token does not match any configured token
2026-02-17 18:25:52,806 - __main__ - WARNING - [http_exception_handler:514] HTTP 401 on /process: Invalid or expired token. Please check your API token from Katonic AI Studio â†’ API Management. If this is a newly created token, ensure it has been added to the .env file and the API has been restarted.
